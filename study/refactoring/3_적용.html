<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>적용 사례 | Lingi04</title>
    <meta name="description" content="개발 관련 이것 저것">
    
    
    <link rel="preload" href="/assets/css/0.styles.4b6fa609.css" as="style"><link rel="preload" href="/assets/js/app.9bf9b52a.js" as="script"><link rel="preload" href="/assets/js/2.2f398f54.js" as="script"><link rel="preload" href="/assets/js/73.24eca150.js" as="script"><link rel="prefetch" href="/assets/js/10.d4a80777.js"><link rel="prefetch" href="/assets/js/11.42b53835.js"><link rel="prefetch" href="/assets/js/12.202d46c9.js"><link rel="prefetch" href="/assets/js/13.6b965925.js"><link rel="prefetch" href="/assets/js/14.88717f6a.js"><link rel="prefetch" href="/assets/js/15.0e36bd3d.js"><link rel="prefetch" href="/assets/js/16.444397c9.js"><link rel="prefetch" href="/assets/js/17.6d5f1186.js"><link rel="prefetch" href="/assets/js/18.c27d2f83.js"><link rel="prefetch" href="/assets/js/19.5069e2ba.js"><link rel="prefetch" href="/assets/js/20.887f805f.js"><link rel="prefetch" href="/assets/js/21.ac4d3914.js"><link rel="prefetch" href="/assets/js/22.9bb43966.js"><link rel="prefetch" href="/assets/js/23.14e2eac5.js"><link rel="prefetch" href="/assets/js/24.fcbf8df3.js"><link rel="prefetch" href="/assets/js/25.67802c13.js"><link rel="prefetch" href="/assets/js/26.35ac2a96.js"><link rel="prefetch" href="/assets/js/27.12f0db9a.js"><link rel="prefetch" href="/assets/js/28.e6301139.js"><link rel="prefetch" href="/assets/js/29.41f5368b.js"><link rel="prefetch" href="/assets/js/3.87a0ff5a.js"><link rel="prefetch" href="/assets/js/30.920286bf.js"><link rel="prefetch" href="/assets/js/31.a28662b9.js"><link rel="prefetch" href="/assets/js/32.d5bc20f7.js"><link rel="prefetch" href="/assets/js/33.9fa2dacf.js"><link rel="prefetch" href="/assets/js/34.ea35f454.js"><link rel="prefetch" href="/assets/js/35.10b1c933.js"><link rel="prefetch" href="/assets/js/36.4129a5da.js"><link rel="prefetch" href="/assets/js/37.eee328ed.js"><link rel="prefetch" href="/assets/js/38.aec9f681.js"><link rel="prefetch" href="/assets/js/39.4e8e7e14.js"><link rel="prefetch" href="/assets/js/4.d7ee998c.js"><link rel="prefetch" href="/assets/js/40.a4d5f179.js"><link rel="prefetch" href="/assets/js/41.fe7864f5.js"><link rel="prefetch" href="/assets/js/42.cfb9021c.js"><link rel="prefetch" href="/assets/js/43.837843f8.js"><link rel="prefetch" href="/assets/js/44.8f9bfb2e.js"><link rel="prefetch" href="/assets/js/45.e465b911.js"><link rel="prefetch" href="/assets/js/46.0d94a68f.js"><link rel="prefetch" href="/assets/js/47.c2c4c2f0.js"><link rel="prefetch" href="/assets/js/48.ed4315b9.js"><link rel="prefetch" href="/assets/js/49.957cf810.js"><link rel="prefetch" href="/assets/js/5.e74b6197.js"><link rel="prefetch" href="/assets/js/50.d7d8231c.js"><link rel="prefetch" href="/assets/js/51.be3f93d0.js"><link rel="prefetch" href="/assets/js/52.4c4db762.js"><link rel="prefetch" href="/assets/js/53.46c3ef6f.js"><link rel="prefetch" href="/assets/js/54.0cbb4096.js"><link rel="prefetch" href="/assets/js/55.6082caee.js"><link rel="prefetch" href="/assets/js/56.b4abce8b.js"><link rel="prefetch" href="/assets/js/57.e3054a16.js"><link rel="prefetch" href="/assets/js/58.2441b7d7.js"><link rel="prefetch" href="/assets/js/59.92d58df3.js"><link rel="prefetch" href="/assets/js/6.b4ec9f4c.js"><link rel="prefetch" href="/assets/js/60.60f2359b.js"><link rel="prefetch" href="/assets/js/61.a42c8532.js"><link rel="prefetch" href="/assets/js/62.34196576.js"><link rel="prefetch" href="/assets/js/63.220b8f7b.js"><link rel="prefetch" href="/assets/js/64.76f9f384.js"><link rel="prefetch" href="/assets/js/65.0f8c7dfd.js"><link rel="prefetch" href="/assets/js/66.2a7bf695.js"><link rel="prefetch" href="/assets/js/67.893bc67a.js"><link rel="prefetch" href="/assets/js/68.be686ee3.js"><link rel="prefetch" href="/assets/js/69.7f8a9188.js"><link rel="prefetch" href="/assets/js/7.1e9a546b.js"><link rel="prefetch" href="/assets/js/70.5be336f3.js"><link rel="prefetch" href="/assets/js/71.6e1ad52f.js"><link rel="prefetch" href="/assets/js/72.2c3ce851.js"><link rel="prefetch" href="/assets/js/74.7ea296eb.js"><link rel="prefetch" href="/assets/js/75.60d30dc8.js"><link rel="prefetch" href="/assets/js/8.09056a9a.js"><link rel="prefetch" href="/assets/js/9.a3851888.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b6fa609.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/thumbnail.png" alt="Lingi04" class="logo"> <span class="site-name can-hide">Lingi04</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link router-link-active">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/experiences/" class="nav-link">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link router-link-active">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/experiences/" class="nav-link">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Design Pattern</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/designpattern/1_observer.html" class="sidebar-link">Observer Pattern</a></li><li><a href="/study/designpattern/2_proxy.html" class="sidebar-link">Proxy Pattern</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Algorithm</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Leet Code</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/algorithm/algorithm_leet_46-50.html" class="sidebar-link">46번 ~ 50번</a></li><li><a href="/study/algorithm/algorithm_leet_51-60.html" class="sidebar-link">51번 ~ 60번</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>깨끗한 코드</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/refactoring/1_intro.html" class="sidebar-link">INTRO</a></li><li><a href="/study/refactoring/2_목표설명.html" class="sidebar-link">목표 설명</a></li><li><a href="/study/refactoring/3_적용.html" class="active sidebar-link">적용 사례</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/refactoring/3_적용.html#사전-설명" class="sidebar-link">사전 설명</a></li><li class="sidebar-sub-header"><a href="/study/refactoring/3_적용.html#리팩토링-원칙" class="sidebar-link">리팩토링 원칙</a></li><li class="sidebar-sub-header"><a href="/study/refactoring/3_적용.html#적용-방식" class="sidebar-link">적용 방식</a></li><li class="sidebar-sub-header"><a href="/study/refactoring/3_적용.html#결과" class="sidebar-link">결과</a></li><li class="sidebar-sub-header"><a href="/study/refactoring/3_적용.html#결국-이번-시도는" class="sidebar-link">결국 이번 시도는...</a></li></ul></li><li><a href="/study/refactoring/4_적용2.html" class="sidebar-link">적용 사례 2</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>책</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>오브젝트</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/book/object/2-객체지향프로그래밍.html" class="sidebar-link">2. 객체지향 프로그래밍</a></li><li><a href="/study/book/object/3-역할_책임_협력.html" class="sidebar-link">3. 역할, 책임, 협력</a></li><li><a href="/study/book/object/4-설계_품질과_트레이드오프.html" class="sidebar-link">4. 설계 품질과 트레이드오프</a></li><li><a href="/study/book/object/5-책임_할당하기.html" class="sidebar-link">5. 책임 할당하기</a></li><li><a href="/study/book/object/6-메시지와_인터페이스.html" class="sidebar-link">6. 메시지와 인터페이스</a></li><li><a href="/study/book/object/7-객체_분해.html" class="sidebar-link">7. 객체 분해</a></li><li><a href="/study/book/object/8-의존성_관리하기.html" class="sidebar-link">8. 의존성 관리하기</a></li><li><a href="/study/book/object/9-유연한_설계.html" class="sidebar-link">9. 유연한 설계</a></li><li><a href="/study/book/object/10-상속과_코드_재사용.html" class="sidebar-link">10. 상속과 코드 재사용</a></li><li><a href="/study/book/object/11-합성과_유연한_설계.html" class="sidebar-link">11. 합성과 유연한 설계</a></li><li><a href="/study/book/object/12-다형성.html" class="sidebar-link">12. 다형성</a></li><li><a href="/study/book/object/15-디자인_패턴과_프레임워크.html" class="sidebar-link">15. 디자인 패턴과 프레임워크</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="적용-사례">적용 사례</h1> <p>800줄 짜리 메서드가 있었다. 그래서 앞선 글에서 적은 내용들을 적용하기 딱 좋은 케이스라고 생각했다. 깨끗한 코드를 짜기 위한 연습이라 생각하며 리팩토링을 해보았다.</p> <h2 id="사전-설명">사전 설명</h2> <p>코드를 공개할 수가 없어서 말로 설명을 최대한 이해하기 쉽게 해봐야겠다.</p> <p>회사에서 사용하는 개념인데 GroupA, ItemB, ItemC가 있고 GroupA는 ItemB, ItemC를 포함한다. 각 GroupAService, ItemBService, ItemCService엔 GroupA, ItemB, ItemC에 관한 동작들이 구현되어 있다.</p> <p><strong>deployGroupA</strong>라는 메서드가 있다. 이 메서드에는 세부 기능 <strong>a</strong>, <strong>itemB</strong>, <strong>itemC</strong>, <strong>e</strong>를 위한 로직이 있었고 이 로직들은 if문과 for문 그리고 이유를 설명해주는 주석들이 잘 버무러져 있었다. 또한 <strong>itemB</strong>와 <strong>itemC</strong>는 ItemBService, ItemCService엔 <strong>deployB</strong>와 <strong>deployC</strong>를 위한 로직과 비슷하다.</p> <p>코드를 간단하게 설명하면 아래와 같다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>a</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupAService</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deoloyGroupA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// deploy a</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token comment">// deploy item B</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        
        <span class="token comment">// deploy item C</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token comment">// deploy e</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>b</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItemBService</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deoloyItemB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// deoloy item B</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>c</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItemCService</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deoloyItemC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// deoloy item C</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이 코드들 중 deoloyGroupA메서드를 리펙토링 해보기로 했다.</p> <h2 id="리팩토링-원칙">리팩토링 원칙</h2> <p>앞선 글에서 처럼</p> <ol><li>한 메서드는 인덴트를 하나만</li> <li>else 예약어 사용을 자제하자</li> <li>한 가지 메소드는 한 가지 일만</li> <li>지역변수를 없애보자</li></ol> <p>네 가지를 원칙을 지켜 읽기 쉽고 재사용 가능한 코드를 만드는 것이 목표 이다.</p> <h2 id="적용-방식">적용 방식</h2> <p>일단 세부 기능별로 나눈 후 작은 메서드로 분리하는 작업을 반복해서 했다. 하지만 너무 세분화해서 코드의 깊이가 깊어지면 오히려 이해하기가 어려울 것 같아 너무 세분화 하진 않았다.<br>
정리하면 아래와 같다.</p> <table><thead><tr><th>원칙</th> <th>적용방식</th></tr></thead> <tbody><tr><td>1. 한 메서드는 인덴트를 하나만</td> <td>if/for 가 중첩되는 경우 메서드를 분리하였다.</td></tr> <tr><td>2. else 예약어 사용을 자제하자</td> <td>메서드를 분리하니 조건에 안맞는 경우는 미리 return 할 수 있어서 어느 정도 해결 되었다. 또한 코드를 읽어보고 없앨 수 있는건 없애도록 노력했다.</td></tr> <tr><td>3. 한 가지 메소드는 한 가지 일만</td> <td>최대한 지키려 노력했으나 코드의 깊이가 너무 깊어지지 않도록 적당한 선 까지만 메서드를 분리 했다.</td></tr> <tr><td>4. 지역변수를 없애보자</td> <td>null이 return 될 수 있는 경우를 제외하고 코드를 읽는데 큰 무리가 없을 정도 선에서 지역변수를 제거하였다. 특히 한번만 쓰이는 지역변수는 거의 다 없앴다.</td></tr></tbody></table> <h2 id="결과">결과</h2> <p>우선 (전체 코드는 늘어났지만) 한개의 길이가 800라인이던 메서드를 19개의 메서드로 분리를 했다. 길었던 메서드는 분리되어 메서드 안에 세부 메서드가 나열되어 있는 형태로 완성되었다. 메서드명도 최대한 의미있는 이름으로 만드려 노력했다. 덕분에 주석도 어느 정도 줄일 수 있었다. 하지만 몇가지 이유 때문에 배포 소스에 적용할 순 없었다.</p> <h3 id="아쉬운점">아쉬운점</h3> <ol><li>코드 재사용 부분에서 기대했던 것 만큼 효과를 보기 어려웠다.
<ul><li>특히 deoloyGroupA 메서드의 <strong>deoloy item B</strong>와 <strong>deoloy item C</strong> 로직은 <strong>ItemBService</strong>,  <strong>ItemCService</strong> 클래스의  <strong>deoloyItemB</strong>와 <strong>deoloyItemC</strong> 메서드와 로직이 거의 유사했기 때문에 재사용할 수 있을 것이라 생각했는데 막상 보니 재사용 하기 어려웠다.</li></ul></li> <li>리팩토링한 코드를 신뢰할 수가 없었다.
<ul><li>테스트 코드가 있는건 아니지만 기존 코드는 qa에서 검증도 많이 했고 서비스를 하며 많이 검증된 상태였다.</li> <li>하지만 리팩토링한 코드는 직접 테스트를 해보며 어느정도 검증을 했지만 배포 소스에 적용할 순 없었다.</li> <li>여기서 단위테스트의 중요성에 대해 느낄 수 있었다.</li></ul></li></ol> <h3 id="잘-된점">잘 된점??</h3> <p>그래도 잘된점을 꼽아보자면 일단 주관적 판단일지도 모르나 코드 읽기가 조금 더 수월해 졌다.</p> <h2 id="결국-이번-시도는">결국 이번 시도는...</h2> <p>결국 이번 시도는 몇가지 장점을 느끼긴 했지만 부족한 점 역시 느끼며 연습해 보는 것으로 끝났다.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study/refactoring/2_목표설명.html" class="prev">목표 설명</a></span> <span class="next"><a href="/study/refactoring/4_적용2.html">적용 사례 2</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9bf9b52a.js" defer></script><script src="/assets/js/2.2f398f54.js" defer></script><script src="/assets/js/73.24eca150.js" defer></script>
  </body>
</html>
