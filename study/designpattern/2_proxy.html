<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Proxy Pattern | Lingi04</title>
    <meta name="description" content="개발 관련 이것 저것">
    
    
    <link rel="preload" href="/assets/css/0.styles.4b6fa609.css" as="style"><link rel="preload" href="/assets/js/app.968d4068.js" as="script"><link rel="preload" href="/assets/js/2.e419600a.js" as="script"><link rel="preload" href="/assets/js/104.0969a21f.js" as="script"><link rel="prefetch" href="/assets/js/10.2d6dd5e3.js"><link rel="prefetch" href="/assets/js/100.51ca8b81.js"><link rel="prefetch" href="/assets/js/101.3eb424f8.js"><link rel="prefetch" href="/assets/js/102.c6cb0c1d.js"><link rel="prefetch" href="/assets/js/103.28c9471d.js"><link rel="prefetch" href="/assets/js/105.43f943c8.js"><link rel="prefetch" href="/assets/js/106.ba981bc7.js"><link rel="prefetch" href="/assets/js/107.834dc994.js"><link rel="prefetch" href="/assets/js/108.fb2c985e.js"><link rel="prefetch" href="/assets/js/11.88b01a58.js"><link rel="prefetch" href="/assets/js/12.5551473d.js"><link rel="prefetch" href="/assets/js/13.45dd4bc2.js"><link rel="prefetch" href="/assets/js/14.67e29bf8.js"><link rel="prefetch" href="/assets/js/15.4445c3a6.js"><link rel="prefetch" href="/assets/js/16.f6bafddf.js"><link rel="prefetch" href="/assets/js/17.72d85811.js"><link rel="prefetch" href="/assets/js/18.c5513ed8.js"><link rel="prefetch" href="/assets/js/19.31adf5fd.js"><link rel="prefetch" href="/assets/js/20.ce7fc55d.js"><link rel="prefetch" href="/assets/js/21.9fd2d792.js"><link rel="prefetch" href="/assets/js/22.40121585.js"><link rel="prefetch" href="/assets/js/23.7b6084cc.js"><link rel="prefetch" href="/assets/js/24.4eaf9b2e.js"><link rel="prefetch" href="/assets/js/25.32c78728.js"><link rel="prefetch" href="/assets/js/26.1a814f94.js"><link rel="prefetch" href="/assets/js/27.246f3191.js"><link rel="prefetch" href="/assets/js/28.f5aa7be9.js"><link rel="prefetch" href="/assets/js/29.b93d7dcd.js"><link rel="prefetch" href="/assets/js/3.e1f5be75.js"><link rel="prefetch" href="/assets/js/30.b052cbc0.js"><link rel="prefetch" href="/assets/js/31.e2b9f133.js"><link rel="prefetch" href="/assets/js/32.e98e8e31.js"><link rel="prefetch" href="/assets/js/33.d6898684.js"><link rel="prefetch" href="/assets/js/34.cf7380db.js"><link rel="prefetch" href="/assets/js/35.15780e28.js"><link rel="prefetch" href="/assets/js/36.9e0f8ab5.js"><link rel="prefetch" href="/assets/js/37.90ce7b3c.js"><link rel="prefetch" href="/assets/js/38.f70e1b20.js"><link rel="prefetch" href="/assets/js/39.683079c5.js"><link rel="prefetch" href="/assets/js/4.e18ebf1a.js"><link rel="prefetch" href="/assets/js/40.ef32a3a8.js"><link rel="prefetch" href="/assets/js/41.8cea8f69.js"><link rel="prefetch" href="/assets/js/42.df076eea.js"><link rel="prefetch" href="/assets/js/43.7d3dc261.js"><link rel="prefetch" href="/assets/js/44.5ed8e795.js"><link rel="prefetch" href="/assets/js/45.54094204.js"><link rel="prefetch" href="/assets/js/46.172d6211.js"><link rel="prefetch" href="/assets/js/47.9ce2d6e9.js"><link rel="prefetch" href="/assets/js/48.26af26e2.js"><link rel="prefetch" href="/assets/js/49.784fdfba.js"><link rel="prefetch" href="/assets/js/5.fdb230f5.js"><link rel="prefetch" href="/assets/js/50.d16eff51.js"><link rel="prefetch" href="/assets/js/51.610c36df.js"><link rel="prefetch" href="/assets/js/52.83c29631.js"><link rel="prefetch" href="/assets/js/53.d989a20d.js"><link rel="prefetch" href="/assets/js/54.6a633402.js"><link rel="prefetch" href="/assets/js/55.5badc36d.js"><link rel="prefetch" href="/assets/js/56.57d5ace0.js"><link rel="prefetch" href="/assets/js/57.8e5cd012.js"><link rel="prefetch" href="/assets/js/58.e8f38d6c.js"><link rel="prefetch" href="/assets/js/59.bc71dc6a.js"><link rel="prefetch" href="/assets/js/6.7fb74477.js"><link rel="prefetch" href="/assets/js/60.8316c505.js"><link rel="prefetch" href="/assets/js/61.20724712.js"><link rel="prefetch" href="/assets/js/62.76cd46c4.js"><link rel="prefetch" href="/assets/js/63.39884fd2.js"><link rel="prefetch" href="/assets/js/64.f20d5782.js"><link rel="prefetch" href="/assets/js/65.a4fe4be1.js"><link rel="prefetch" href="/assets/js/66.168f9d74.js"><link rel="prefetch" href="/assets/js/67.a7c194ac.js"><link rel="prefetch" href="/assets/js/68.1fcf8167.js"><link rel="prefetch" href="/assets/js/69.3bbd8a13.js"><link rel="prefetch" href="/assets/js/7.ee25bf2f.js"><link rel="prefetch" href="/assets/js/70.d7f6ec2a.js"><link rel="prefetch" href="/assets/js/71.15ab3442.js"><link rel="prefetch" href="/assets/js/72.961a242b.js"><link rel="prefetch" href="/assets/js/73.bb0407ef.js"><link rel="prefetch" href="/assets/js/74.c0cad9aa.js"><link rel="prefetch" href="/assets/js/75.e1592924.js"><link rel="prefetch" href="/assets/js/76.ee9273ba.js"><link rel="prefetch" href="/assets/js/77.7cc9a13a.js"><link rel="prefetch" href="/assets/js/78.83b0f6c2.js"><link rel="prefetch" href="/assets/js/79.5efa5100.js"><link rel="prefetch" href="/assets/js/8.20bc98a5.js"><link rel="prefetch" href="/assets/js/80.deca5d67.js"><link rel="prefetch" href="/assets/js/81.46f5c2bf.js"><link rel="prefetch" href="/assets/js/82.5a6844c8.js"><link rel="prefetch" href="/assets/js/83.b898047a.js"><link rel="prefetch" href="/assets/js/84.79437512.js"><link rel="prefetch" href="/assets/js/85.daf0c959.js"><link rel="prefetch" href="/assets/js/86.26753c97.js"><link rel="prefetch" href="/assets/js/87.d3594f57.js"><link rel="prefetch" href="/assets/js/88.9e5b80b9.js"><link rel="prefetch" href="/assets/js/89.db490924.js"><link rel="prefetch" href="/assets/js/9.c29c567d.js"><link rel="prefetch" href="/assets/js/90.79f46a42.js"><link rel="prefetch" href="/assets/js/91.341d76bb.js"><link rel="prefetch" href="/assets/js/92.076157bc.js"><link rel="prefetch" href="/assets/js/93.303d7b63.js"><link rel="prefetch" href="/assets/js/94.0aac6b86.js"><link rel="prefetch" href="/assets/js/95.39a369e7.js"><link rel="prefetch" href="/assets/js/96.25c7e62b.js"><link rel="prefetch" href="/assets/js/97.860d9767.js"><link rel="prefetch" href="/assets/js/98.fa922bcd.js"><link rel="prefetch" href="/assets/js/99.aa9f82ec.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b6fa609.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/thumbnail.png" alt="Lingi04" class="logo"> <span class="site-name can-hide">Lingi04</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link router-link-active">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link router-link-active">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Design Pattern</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/designpattern/1_observer.html" class="sidebar-link">Observer Pattern</a></li><li><a href="/study/designpattern/2_proxy.html" class="active sidebar-link">Proxy Pattern</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/designpattern/2_proxy.html#필요성에-대해" class="sidebar-link">필요성에 대해.</a></li><li class="sidebar-sub-header"><a href="/study/designpattern/2_proxy.html#어떻게-해결할까" class="sidebar-link">어떻게 해결할까?</a></li><li class="sidebar-sub-header"><a href="/study/designpattern/2_proxy.html#proxy-패턴의-구조" class="sidebar-link">Proxy 패턴의 구조</a></li><li class="sidebar-sub-header"><a href="/study/designpattern/2_proxy.html#_3rd-party-라이브러리와-proxy-예시" class="sidebar-link">3rd-party 라이브러리와 Proxy 예시</a></li><li class="sidebar-sub-header"><a href="/study/designpattern/2_proxy.html#적용-분야" class="sidebar-link">적용 분야</a></li><li class="sidebar-sub-header"><a href="/study/designpattern/2_proxy.html#구현방법" class="sidebar-link">구현방법</a></li><li class="sidebar-sub-header"><a href="/study/designpattern/2_proxy.html#장단점" class="sidebar-link">장단점</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Algorithm</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Leet Code</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/algorithm/algorithm_leet_46-50.html" class="sidebar-link">46번 ~ 50번</a></li><li><a href="/study/algorithm/algorithm_leet_51-60.html" class="sidebar-link">51번 ~ 60번</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>책</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>오브젝트</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/book/object/2-객체지향프로그래밍.html" class="sidebar-link">2. 객체지향 프로그래밍</a></li><li><a href="/study/book/object/3-역할_책임_협력.html" class="sidebar-link">3. 역할, 책임, 협력</a></li><li><a href="/study/book/object/4-설계_품질과_트레이드오프.html" class="sidebar-link">4. 설계 품질과 트레이드오프</a></li><li><a href="/study/book/object/5-책임_할당하기.html" class="sidebar-link">5. 책임 할당하기</a></li><li><a href="/study/book/object/6-메시지와_인터페이스.html" class="sidebar-link">6. 메시지와 인터페이스</a></li><li><a href="/study/book/object/7-객체_분해.html" class="sidebar-link">7. 객체 분해</a></li><li><a href="/study/book/object/8-의존성_관리하기.html" class="sidebar-link">8. 의존성 관리하기</a></li><li><a href="/study/book/object/9-유연한_설계.html" class="sidebar-link">9. 유연한 설계</a></li><li><a href="/study/book/object/10-상속과_코드_재사용.html" class="sidebar-link">10. 상속과 코드 재사용</a></li><li><a href="/study/book/object/11-합성과_유연한_설계.html" class="sidebar-link">11. 합성과 유연한 설계</a></li><li><a href="/study/book/object/12-다형성.html" class="sidebar-link">12. 다형성</a></li><li><a href="/study/book/object/15-디자인_패턴과_프레임워크.html" class="sidebar-link">15. 디자인 패턴과 프레임워크</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>이펙티브자바</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>4. 클래스와 인터페이스</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/book/effectivejava/4-class-and-interface/rule15.html" class="sidebar-link">클래스와 멤버의 접근 권한은 최소화하라.</a></li><li><a href="/study/book/effectivejava/4-class-and-interface/rule16.html" class="sidebar-link">public 클래스 안에는 public 필드를 두지 말고 접근자 메서드를 사용하라.</a></li><li><a href="/study/book/effectivejava/4-class-and-interface/rule18.html" class="sidebar-link">계승하는 대신 구성하라</a></li><li><a href="/study/book/effectivejava/4-class-and-interface/rule20.html" class="sidebar-link">추상 클래스보다는 인터페이스를 우선하라</a></li><li><a href="/study/book/effectivejava/4-class-and-interface/rule21.html" class="sidebar-link">인터페이스는 구현하는 쪽을 생각해 설계하라</a></li><li><a href="/study/book/effectivejava/4-class-and-interface/rule22.html" class="sidebar-link">인터페이스는 타입을 정의하는 용도로만 사용하라</a></li><li><a href="/study/book/effectivejava/4-class-and-interface/rule23.html" class="sidebar-link">태그 달린 클래스보다는 클래스 계층구조를 활용하라</a></li><li><a href="/study/book/effectivejava/4-class-and-interface/rule24.html" class="sidebar-link">멤버 클래스는 되도록 static으로 만들라</a></li><li><a href="/study/book/effectivejava/4-class-and-interface/rule25.html" class="sidebar-link">톱레벨 클래스는 한 파일에 하나만 담으라</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>5. 제네릭</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>7. 람다와 스트림</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="proxy-pattern">Proxy Pattern</h1> <p>Proxy패턴은 Structural Design Pattern(클래스나 객체를 조합해 더 큰 구조를 만드는 패턴)으로, 원본 객체에 대한 요청 앞, 뒤로 무언가를 수행할 수 있도록 해 준다. 출처는 <a href="https://refactoring.guru/design-patterns/proxy" target="_blank" rel="noopener noreferrer">이곳<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 이다.</p> <h2 id="필요성에-대해">필요성에 대해.</h2> <p>왜 객체에 대한 접근을 제어해야 할까? 예를 들어 보자.<br>
많은 양의 시스템 리소스를 잡아먹는 방대한 양의 Object가 있다고 해 보자. 이 객체에 접근하는 Client들은 이 객체를 항상 필요로 하는 것이 아니라 가끔씩 필요로 한다.<br>
그래서 Client들은 Lazy Initialization(필요할 때 생성) Code를 실행해야 하는데, 이때 상당히 많은 코드의 중복이 발생할 수 있다.<br>
이상적으로는 Object 클래스에 이 로직을 집어넣는다면 좋겠지만, 현실은 불가능할 때가 많다. 예를들어 closed 3rd-party 라이브러리의 클래스를 사용할 때 그렇다.</p> <h2 id="어떻게-해결할까">어떻게 해결할까?</h2> <p>Proxy 패턴을 적용해 보자.</p> <ul><li>Origin Service Object와 같은 interface를 구현한 proxy 클래스를 생성</li> <li>모든 clients가 proxy에 접근하도록 한다.</li> <li>proxy는 client로 부터 요청을 받으면 Origin Service Object를 생성하고, 모든 작업을 위임한다.</li></ul> <p>이렇게 함으로서 Origin Service Object 의 변경 없이 Origin Service Object의 로직을 실행하기 전, 후에 무언가 필요한 작업을 실행시킬 수 있다.</p> <h2 id="proxy-패턴의-구조">Proxy 패턴의 구조</h2> <p><img src="https://raw.githubusercontent.com/lingi-log/lingi-log/master/assets/images/study/designpattern/proxy_2.jpeg" alt="proxy패턴의구조"></p> <ol><li><code>ServiceInterface</code>는 Service의 인터페이스를 정의한다. Proxy는 Service Object처럼 동작하기 위해 이 인터페이스를 구현해야 한다.</li> <li><code>Service</code>는 필요한 비지니스 로직을 제공한다.</li> <li><code>Proxy</code>클래스에는 service object를 가리키는 reference field가 있다. <code>Proxy</code>가 특정 작업(lazy initialization, logging, access control, caching 등)을 마친 뒤 request를 service object에 전달한다.<br>
보통, proxy는 service object의 전체 life cycle을 관리한다.</li> <li>클라이언트는 동일한 인터페이스를 통해 서비스와 프록시 모두에서 작동해야한다. 이렇게하면 서비스 객체가 필요한 모든 코드에 프록시를 전달할 수 있다.</li></ol> <h2 id="_3rd-party-라이브러리와-proxy-예시">3rd-party 라이브러리와 Proxy 예시</h2> <p>Proxy로 어떻게 3rd-party 라이브러리의 lazy initialization과 caching을 구현하는 지 보여주는 예시 이다.
<img src="https://raw.githubusercontent.com/lingi-log/lingi-log/master/assets/images/study/designpattern/proxy_3.jpeg" alt="proxy와3rdpartylib">
Library는 video download 클래스를 제공한다. 하지만 이것은 매우 비효율적이다. 만약 Client application이 동일한 video를 여러 번 요청하면, 라이브러리는 그 파일을 캐싱해놓고 재사용하는 것이 아니라 계속해서 다운로드 한다.<br>
Proxy클래스는 원본 라이브러리와 같은 인터페이스를 구현하고 있으며 모든 작업 요청을 위임한다. 하지만 Client가 동일한 파일을 반복적으로 요청한다면, cache된 파일을 내려준다.<br>
아래의 psuedocode를 보고 이해해 보자.</p> <div class="language- extra-class"><pre class="language-text"><code>// The interface of a remote service.
interface ThirdPartyYoutubeLib is
    method listVideos()
    method getVideoInfo(id)
    method downloadVideo(id)

// The concrete implementation of a service connector. Methods
// of this class can request information from YouTube. The speed
// of the request depends on a user's internet connection as
// well as YouTube's. The application will slow down if a lot of
// requests are fired at the same time, even if they all request
// the same information.
class ThirdPartyYoutubeClass implements ThirdPartyYoutubeLib is
    method listVideos() is
        // Send an API request to YouTube.

    method getVideoInfo(id) is
        // Get metadata about some video.

    method downloadVideo(id) is
        // Download a video file from YouTube.

// To save some bandwidth, we can cache request results and keep
// them for some time. But it may be impossible to put such code
// directly into the service class. For example, it could have
// been provided as part of a third party library and/or defined
// as `final`. That's why we put the caching code into a new
// proxy class which implements the same interface as the
// service class. It delegates to the service object only when
// the real requests have to be sent.
class CachedYoutubeClass implements ThirdPartyYouTubeLib is
    private field service: ThirdPartyYouTubeClass
    private field listCache, videoCache
    field needReset

    constructor CachedYoutubeClass(service: ThirdPartyYouTubeLib) is
        this.service = service

    method listVideos() is
        if (listCache == null || needReset)
            listCache = service.listVideos()
        return listCache

    method getVideoInfo(id) is
        if (videoCache == null || needReset)
            videoCache = service.getVideoInfo(id)
        return videoCache

    method downloadVideo(id) is
        if (!downloadExists(id) || needReset)
            service.downloadVideo(id)

// The GUI class, which used to work directly with a service
// object, stays unchanged as long as it works with the service
// object through an interface. We can safely pass a proxy
// object instead of a real service object since they both
// implement the same interface.
class YoutubeManager is
    protected field service: ThirdPartyYouTubeLib

    constructor YoutubeManager(service: ThirdPartyYouTubeLib) is
        this.service = service

    method renderVideoPage(id) is
        info = service.getVideoInfo(id)
        // Render the video page.

    method renderListPanel() is
        list = service.listVideos()
        // Render the list of video thumbnails.

    method reactOnUserInput() is
        renderVideoPage()
        renderListPanel()

// The application can configure proxies on the fly.
class Application is
    method init() is
        aYouTubeService = new ThirdPartyYouTubeClass()
        aYouTubeProxy = new CachedYouTubeClass(aYouTubeService)
        manager = new YouTubeManager(aYouTubeProxy)
        manager.reactOnUserInput()
</code></pre></div><h2 id="적용-분야">적용 분야</h2> <h3 id="lazy-initialization">Lazy Initialization</h3> <p>객체를 앱 실행 시 생성하는 것이 아니라 객체가 필요할 때(호출됐을 때) 생성할 수 있다.</p> <h3 id="access-control">Access Control</h3> <p>중요한 자원에 접근할 때 인가받은 사용자만이 접근할 수 있도록 접근을 제어할 수 있다.</p> <h3 id="local-execution-of-a-remote-service">Local execution of a remote service</h3> <p>원격에 있는 Service를 실행해야 하는 경우 Proxy는 네트워크를 통해 클라이언트 요청을 전달하여 네트워크를 통해 작업하는 모든 정보를 처리한다.</p> <h3 id="logging-request">Logging Request</h3> <p>실제 Service에 요청을 전달하기 전/후 요청에 대한 로그를 남길 수 있다.</p> <h3 id="caching-request-results">Caching request results</h3> <p>result를 캐싱해놓음으로서 반복적인 요청에 대해 Service를 호출하지 않고 캐싱해놓은 데이터를 return 해주면 된다.</p> <h3 id="smart-reference">Smart reference</h3> <p>Smart reference. This is when you need to be able to dismiss a heavyweight object once there are no clients that use it.</p> <p>The proxy can keep track of clients that obtained a reference to the service object or its results. From time to time, the proxy may go over the clients and check whether they are still active. If the client list gets empty, the proxy might dismiss the service object and free the underlying system resources.</p> <p>The proxy can also track whether the client had modified the service object. Then the unchanged objects may be reused by other clients.</p> <h2 id="구현방법">구현방법</h2> <ol><li>존재하는 service interface가 없다면, proxy와 service object를 상호 교환 할 수 있는 interface를 하나 만든다. Service 클래스로 부터 interface를 뽑아내는 것은 항상 가능한 것은 아니다. interface를 뽑아내고 사용하기 위해 많은 곳을 변경해야 하기ㅏ 때문이다. 이럴 경우 대안으로 service 클래스를 상속받아 proxy를 만들 수 있다. 이 경우 proxy는 service 클래스의 interface를 상속받을 수 있다.</li> <li>Proxy 클래스 에는 service의 reference를 담을 수 있는 필드가 필요하다. 보통 proxy는 service의 생명주기를 관리한다. 드물게 클라이언트가 생성자를 통해 service를 전달하기도 한다.</li> <li>Proxy의 목적에 따라 method를 구현한다. 대부분의 경우, 특정 동작을 한 후, proxy는 작업을 service의 객체에 위임해야 한다.</li> <li>경우에 따라 프록시를 사용할 지, 실제 서비스 클래스를 사용할 지 결정할 수 있는 메소드를 제공할 수도 있다. 간단한 static 메소드 이거나 full-blown(완전한?) 팩토리 메소드를 통해.</li> <li>Service object 를 lazy initialization 할 지 결정한다.</li></ol> <h2 id="장단점">장단점</h2> <h3 id="장점">장점</h3> <ul><li>Client가 알 지 못하게 프록시를 적용할 수 있다.</li> <li>Service object의 life cycle을 관리할 수 있다.(when clients don’t care about it.)</li> <li>Service object가 생성되지 않았을 때, 사용 불가 상태일 때도 프록시는 이용할 수 있다.</li> <li>개방/폐쇄 원칙을 따라 service나 client를 수정하지 않고 새로운 프록시를 생성, 사용할 수 있다.</li></ul> <h3 id="단점">단점</h3> <ul><li>새 클래스가 많이 생성, 사용되기 때문에 코드가 복잡해 질 수 있다.</li> <li>Service에서의 응답이 지연될 수 있다.</li></ul> <hr> <p>출처 : <a href="https://refactoring.guru/design-patterns/proxy" target="_blank" rel="noopener noreferrer">https://refactoring.guru/design-patterns/proxy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/12/2020, 11:14:18 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study/designpattern/1_observer.html" class="prev">Observer Pattern</a></span> <span class="next"><a href="/study/algorithm/algorithm_leet_46-50.html">46번 ~ 50번</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.968d4068.js" defer></script><script src="/assets/js/2.e419600a.js" defer></script><script src="/assets/js/104.0969a21f.js" defer></script>
  </body>
</html>
