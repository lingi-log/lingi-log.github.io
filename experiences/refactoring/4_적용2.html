<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>적용 사례 2 | Lingi04</title>
    <meta name="description" content="개발 관련 이것 저것">
    
    
    <link rel="preload" href="/assets/css/0.styles.4b6fa609.css" as="style"><link rel="preload" href="/assets/js/app.706b582d.js" as="script"><link rel="preload" href="/assets/js/2.e419600a.js" as="script"><link rel="preload" href="/assets/js/48.c076cc33.js" as="script"><link rel="prefetch" href="/assets/js/10.ccd1c751.js"><link rel="prefetch" href="/assets/js/100.a2cd050a.js"><link rel="prefetch" href="/assets/js/101.f7b2d2a9.js"><link rel="prefetch" href="/assets/js/102.b64be5c5.js"><link rel="prefetch" href="/assets/js/103.0de2fb1e.js"><link rel="prefetch" href="/assets/js/104.479c4f06.js"><link rel="prefetch" href="/assets/js/105.c8c9863e.js"><link rel="prefetch" href="/assets/js/106.a3fabd88.js"><link rel="prefetch" href="/assets/js/107.422bf92a.js"><link rel="prefetch" href="/assets/js/108.c63714ee.js"><link rel="prefetch" href="/assets/js/109.fd8df2cf.js"><link rel="prefetch" href="/assets/js/11.83135f46.js"><link rel="prefetch" href="/assets/js/110.6a0c4fb5.js"><link rel="prefetch" href="/assets/js/111.d4334423.js"><link rel="prefetch" href="/assets/js/12.6db303cf.js"><link rel="prefetch" href="/assets/js/13.21a32bbb.js"><link rel="prefetch" href="/assets/js/14.67e29bf8.js"><link rel="prefetch" href="/assets/js/15.4445c3a6.js"><link rel="prefetch" href="/assets/js/16.25b5670a.js"><link rel="prefetch" href="/assets/js/17.b36f3e05.js"><link rel="prefetch" href="/assets/js/18.a88910d6.js"><link rel="prefetch" href="/assets/js/19.d0bfef8f.js"><link rel="prefetch" href="/assets/js/20.be2c8e5c.js"><link rel="prefetch" href="/assets/js/21.3355991d.js"><link rel="prefetch" href="/assets/js/22.b3326480.js"><link rel="prefetch" href="/assets/js/23.99e4b4d9.js"><link rel="prefetch" href="/assets/js/24.43eae32b.js"><link rel="prefetch" href="/assets/js/25.d130df9f.js"><link rel="prefetch" href="/assets/js/26.c294125c.js"><link rel="prefetch" href="/assets/js/27.e7136c01.js"><link rel="prefetch" href="/assets/js/28.c82c431c.js"><link rel="prefetch" href="/assets/js/29.e4c07586.js"><link rel="prefetch" href="/assets/js/3.4f1c787b.js"><link rel="prefetch" href="/assets/js/30.949eb54e.js"><link rel="prefetch" href="/assets/js/31.0f92a40c.js"><link rel="prefetch" href="/assets/js/32.0f2c7969.js"><link rel="prefetch" href="/assets/js/33.b3d6236e.js"><link rel="prefetch" href="/assets/js/34.5d067c1f.js"><link rel="prefetch" href="/assets/js/35.dbe87974.js"><link rel="prefetch" href="/assets/js/36.635b2b57.js"><link rel="prefetch" href="/assets/js/37.8e57f858.js"><link rel="prefetch" href="/assets/js/38.5021fc1e.js"><link rel="prefetch" href="/assets/js/39.a0325442.js"><link rel="prefetch" href="/assets/js/4.6b8452ac.js"><link rel="prefetch" href="/assets/js/40.ef32a3a8.js"><link rel="prefetch" href="/assets/js/41.7a04cdcc.js"><link rel="prefetch" href="/assets/js/42.df076eea.js"><link rel="prefetch" href="/assets/js/43.e686dc29.js"><link rel="prefetch" href="/assets/js/44.5ed8e795.js"><link rel="prefetch" href="/assets/js/45.03aa7622.js"><link rel="prefetch" href="/assets/js/46.3b52b4bc.js"><link rel="prefetch" href="/assets/js/47.701fa7ac.js"><link rel="prefetch" href="/assets/js/49.70b2156b.js"><link rel="prefetch" href="/assets/js/5.78b02e55.js"><link rel="prefetch" href="/assets/js/50.ccf1740c.js"><link rel="prefetch" href="/assets/js/51.0fa96d8d.js"><link rel="prefetch" href="/assets/js/52.83c29631.js"><link rel="prefetch" href="/assets/js/53.ad161fa8.js"><link rel="prefetch" href="/assets/js/54.88484f33.js"><link rel="prefetch" href="/assets/js/55.467903a5.js"><link rel="prefetch" href="/assets/js/56.3c358c93.js"><link rel="prefetch" href="/assets/js/57.4d4369bc.js"><link rel="prefetch" href="/assets/js/58.e8f38d6c.js"><link rel="prefetch" href="/assets/js/59.0d599507.js"><link rel="prefetch" href="/assets/js/6.7fb74477.js"><link rel="prefetch" href="/assets/js/60.a5b9a19f.js"><link rel="prefetch" href="/assets/js/61.20724712.js"><link rel="prefetch" href="/assets/js/62.9b9a4e33.js"><link rel="prefetch" href="/assets/js/63.da15dfda.js"><link rel="prefetch" href="/assets/js/64.7610e059.js"><link rel="prefetch" href="/assets/js/65.7fcbf9a7.js"><link rel="prefetch" href="/assets/js/66.f18ff502.js"><link rel="prefetch" href="/assets/js/67.ddf611a4.js"><link rel="prefetch" href="/assets/js/68.6c8db4bc.js"><link rel="prefetch" href="/assets/js/69.6c712a01.js"><link rel="prefetch" href="/assets/js/7.ee25bf2f.js"><link rel="prefetch" href="/assets/js/70.057ee30f.js"><link rel="prefetch" href="/assets/js/71.d7f7ed81.js"><link rel="prefetch" href="/assets/js/72.961a242b.js"><link rel="prefetch" href="/assets/js/73.bb0407ef.js"><link rel="prefetch" href="/assets/js/74.8073316b.js"><link rel="prefetch" href="/assets/js/75.bd5d09c1.js"><link rel="prefetch" href="/assets/js/76.9b2b0019.js"><link rel="prefetch" href="/assets/js/77.3a0b0a2d.js"><link rel="prefetch" href="/assets/js/78.83b0f6c2.js"><link rel="prefetch" href="/assets/js/79.197e8c18.js"><link rel="prefetch" href="/assets/js/8.20bc98a5.js"><link rel="prefetch" href="/assets/js/80.de88cc4d.js"><link rel="prefetch" href="/assets/js/81.082ea19b.js"><link rel="prefetch" href="/assets/js/82.45d330d4.js"><link rel="prefetch" href="/assets/js/83.3b43913e.js"><link rel="prefetch" href="/assets/js/84.1ab93bec.js"><link rel="prefetch" href="/assets/js/85.95103565.js"><link rel="prefetch" href="/assets/js/86.26753c97.js"><link rel="prefetch" href="/assets/js/87.d3594f57.js"><link rel="prefetch" href="/assets/js/88.406279b7.js"><link rel="prefetch" href="/assets/js/89.710682ef.js"><link rel="prefetch" href="/assets/js/9.64d4d7c9.js"><link rel="prefetch" href="/assets/js/90.804286f0.js"><link rel="prefetch" href="/assets/js/91.3926929f.js"><link rel="prefetch" href="/assets/js/92.d9070f00.js"><link rel="prefetch" href="/assets/js/93.6e3e4a11.js"><link rel="prefetch" href="/assets/js/94.eeddd215.js"><link rel="prefetch" href="/assets/js/95.932e8fd9.js"><link rel="prefetch" href="/assets/js/96.aa7d03e9.js"><link rel="prefetch" href="/assets/js/97.987ced30.js"><link rel="prefetch" href="/assets/js/98.a5adf066.js"><link rel="prefetch" href="/assets/js/99.18388ad2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b6fa609.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/thumbnail.png" alt="Lingi04" class="logo"> <span class="site-name can-hide">Lingi04</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link router-link-active">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link router-link-active">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Experiences</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/experiences/1-deadlock_exception.html" class="sidebar-link">Deadlock 현상 해결</a></li><li><a href="/experiences/2-Autowired와_AOP.html" class="sidebar-link">Autowired와 AOP를 함께 사용할 때 주의 해야 할 점</a></li><li><a href="/experiences/3-kill과_trap.html" class="sidebar-link">Kill과 trap</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>깨끗한 코드</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/experiences/refactoring/1_intro.html" class="sidebar-link">INTRO</a></li><li><a href="/experiences/refactoring/2_목표설명.html" class="sidebar-link">목표 설명</a></li><li><a href="/experiences/refactoring/3_적용.html" class="sidebar-link">적용 사례</a></li><li><a href="/experiences/refactoring/4_적용2.html" class="active sidebar-link">적용 사례 2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiences/refactoring/4_적용2.html#아쉬웠던점" class="sidebar-link">아쉬웠던점</a></li><li class="sidebar-sub-header"><a href="/experiences/refactoring/4_적용2.html#새로운-원칙" class="sidebar-link">새로운 원칙</a></li><li class="sidebar-sub-header"><a href="/experiences/refactoring/4_적용2.html#적용-방식" class="sidebar-link">적용 방식</a></li><li class="sidebar-sub-header"><a href="/experiences/refactoring/4_적용2.html#결과" class="sidebar-link">결과</a></li></ul></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="적용-사례-2">적용 사례 2</h1> <p>앞서 적은 GroupA 하위에 ItemB, ItemC 말고도 ItemD라는 개념이 있는데 이번에 ItemD에 deploy 기능을 구현하게 됐다. ItemDClass에 deploy 기능을 위한 로직을 개발해야 하고 GroupAService 클래스 deployGroupA()메서드 안에 deploy item D 로직을 추가해야 했다.</p> <p>앞선 시도가 성공적이진 않았지만 그 경험을 바탕으로 아쉬웠던 점을 보완해서 이번 개발에 적용해 보려 한다. 우선 앞선 시도에서 아쉬웠던 점을 먼저 짚고 넘어가보자</p> <h2 id="아쉬웠던점">아쉬웠던점</h2> <ol><li>코드 재사용 부분에서 기대했던 것 만큼 효과를 보기 어려웠다.
<ul><li><strong>GroupAService</strong> 안에 deploy item B, deploy item C 관련 메서드를 만들고 ItemBService, ItemCService 에서 사용해보려 했으나 그러지 못했다.</li></ul></li> <li>리팩토링한 코드를 신뢰할 수가 없었다.
<ul><li>이건 말 그대로 정말 내가 리팩토링 한 코드를 신뢰할 수가 없었다.</li></ul></li></ol> <p>이전 시도에서의 아쉬웠던 점 두가지와 지금 읽고있는 Object라는 책을 바탕으로 원칙을 몇개 추가해서 다시 세워 보았다.</p> <h2 id="새로운-원칙">새로운 원칙</h2> <h3 id="_1-코드를-읽기-쉽게-짜보자">1. 코드를 읽기 쉽게 짜보자</h3> <p>앞서 세웠던 원칙이 여기 해당된다.</p> <ol><li>한 메서드는 인덴트를 하나만</li> <li>else 예약어 사용을 자제하자</li> <li>한 가지 메소드는 한 가지 일만</li> <li>지역변수를 없애보자</li></ol> <h3 id="_2-중복-코드를-줄여-코드-재사용성을-높여-보자">2. 중복 코드를 줄여 코드 재사용성을 높여 보자</h3> <p>중복된 코드를 보면(특히 중복된 코드를 변경해야 할 때) 우리는 많은 생각에 잠기게 된다. 중복된 코드는 변경에 취약하므로 될 수 있으면 중복은 없애야 한다고 생각한다. 메서드는 한가지 일만 하도록 작게 쪼개고 여러 클래스에서 쓰이는 메서드는 부모클래스에 올리면 중복을 조금 피할 수 있다. 또한 다형성 개념을 사용하면 중복을 줄이는데 도움이 된다.</p> <h3 id="_3-응집도-높고-결합도가-적도록-설계해-보자">3. 응집도 높고 결합도가 적도록 설계해 보자</h3> <p>낮은 응집도와 높은 결합도는 변경을 저해하는 요소이다.</p> <h3 id="_4-구체-클래스-보단-추상-클래스에-의존을-할-수-있도록-하자">4. 구체 클래스 보단 추상 클래스에 의존을 할 수 있도록 하자</h3> <p>구체 클래스보다 추상클래스에 의존하면 결합도를 낮출 수 있고 컴파일 타임 의존성과 런타임 의존성을 분리할 수 있다. 따라서 변경에 닫혀있고 확장에 열려있는 구조를 만들 수 있다.</p> <h3 id="_5-의존성을-숨기지-말자-되도록이면-외부에서-의존성을-주입하여-사용하자">5. 의존성을 숨기지 말자. 되도록이면 외부에서 의존성을 주입하여 사용하자</h3> <p>어떤 객체를 사용할 때 그 객체가 어디에 의존하고 있는지 퍼블릭 인터페이스에 공개하기로 했다. 내부에서 의존 객체를 생성해서 사용하는 것보다 외부로 공개해놓는게 코드를 이해하는데 더 좋고 변경에도 유연하게 대처할 수 있다고 생각하기 때문이다.</p> <h3 id="_6-리팩토링-후-단위테스트를-해보자">6. 리팩토링 후 단위테스트를 해보자</h3> <p>리팩토링 첫번째 시도가 연습해본것으로 끝나게 된 이유는 코드를 신뢰할 수 없어서였다. 리팩토링 하기 전과 후가 동일한 결과를 내는지에 대해 테스트가 필요하다. 그래서 Junit을 활용해 테스트를 해보기로 했다.</p> <p>이렇게 정해봤다. 회사 소스를 올릴 수 없어 간략하게 텍스트로 설명을 해야 할 것같다. 각 목표를 어떻게 적용하였는지 설명을 해보면 아래와 같다.</p> <h2 id="적용-방식">적용 방식</h2> <h3 id="_1-코드를-읽기-쉽게-짜보자-2">1. 코드를 읽기 쉽게 짜보자</h3> <p>위 네 가지 원칙을 지키며 코드를 짰다.</p> <h3 id="_2-중복-코드를-줄여-코드-재사용성을-높여-보자-template-method-패턴-사용">2. 중복 코드를 줄여 코드 재사용성을 높여 보자 - Template Method 패턴 사용</h3> <h4 id="template-method-패턴-사용">Template Method 패턴 사용</h4> <ul><li>ItemBService.deployItemB, ItemCService.deployItemC, ItemDService.deployItemD는 모두 로직의 흐름이 비슷하다.</li> <li>GroupAService.deployGroupA는 ItemBService.deployItemB, ItemCService.deployItemC, ItemDService.deployItemD 로직을 포함한다.</li> <li>그래서 <code>template method</code> 패턴을 사용하면 적절할 것 같았고, 이 패턴을 사용하였다.</li> <li>추상클래스에 공통된 로직을 집어넣고 달라지는 부분은 상속받은 클래스에서 구현하도록 했다. 추상 클래스에선 생성자와 deploy만 public interface를 공개해놓았다.</li></ul> <h3 id="_3-응집도-높고-결합도가-적도록-설계해-보자-의존성-주입-srp-적용">3. 응집도 높고 결합도가 적도록 설계해 보자 - 의존성 주입, SRP 적용</h3> <h4 id="의존성-주입">의존성 주입</h4> <ul><li>결합도를 낮추기 위해 클래스 안에서 다른 객체가 필요한 경우 외부에서 주입해 주는 방식을 사용하였다.</li></ul> <h4 id="srp-적용">SRP 적용</h4> <ul><li>응집도 관련해서는 deploy 기능을 하는 메서드 관련 부분만 클래스를 따로 떼어내어 Template Method 패턴을 적용하였고, 필요에 따라 상속받아 구현하게 함으로써 SRP를 적용하며 어느 정도 응집도를 높일 수 있었다.</li></ul> <h3 id="_4-구체-클래스-보단-추상-클래스에-의존을-할-수-있도록-하자-2">4. 구체 클래스 보단 추상 클래스에 의존을 할 수 있도록 하자</h3> <ul><li>Template Method 패턴을 사용했으므로 추상클래스 타입을 선언하고 구체클래스를 생성하여 사용하였다.</li> <li>하지만 기존에 구현되어있는 구조가 모두 특정 컨텍스트에 고정되어있는형태여서 추상클래스에 의존하는 구조의 장점이 큰 역할을 하진 못했다.</li></ul> <h3 id="_5-의존성을-숨기지-말자">5. 의존성을 숨기지 말자</h3> <ul><li>내부에서 객체를 생성하지 않고 생성자에서 필요한 객체를 의존성을 주입하여 사용하였다.</li></ul> <h3 id="_6-리팩토링-후-단위테스트를-해보자-2">6. 리팩토링 후 단위테스트를 해보자</h3> <ul><li>나 스스로도 junit에 익숙하지 않았고 회사 동료들도 junit을 사용해본 사람이 없어서 테스트 코드를 작성하는 데 조금 애를 먹었다. 또한 Struts2 프레임워크를 사용하고 있는데 예제코드를 찾기도 어려웠다...</li> <li>모든 메서드별 단위테스트를 하나하나 진행하진 못했고 전체 기능이 잘 돌아가는지 정도만 테스트를 했다.</li></ul> <h2 id="결과">결과</h2> <p>지금까지 글로만 봐왔던 개념들을 실제로 사용해볼수 있는 기회였다. 새로운 구조가 정말로 변경에 유연하게 대처할 수 있을지는 실제로 변경이 일어나봐야 알겠지만 일단 확실한건 읽기쉽고 이해하기 쉬운 코드가 됐다. 긴 메서드를 기능별로 작은 메서드들로 분리를 하였고, 여러 클래스간 중복되는 코드들을 재사용 하였다. 그리고 기능에 대한 알고리즘을 정의함으로써(템플릿메서드패턴 사용) 전체적인 흐름을 따라가기가 쉬워졌다(고 생각한다..).</p> <p>개발 완료하고 팀원들과 리뷰하는 시간을 가졌고 대부분 긍정적인 반응을 보여줬다. 앞으로도 보기좋고 읽기좋고 유지보수하기 좋은 코드를 위한 노력을 계속해나가려 한다.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/2/2020, 10:47:53 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/experiences/refactoring/3_적용.html" class="prev">적용 사례</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.706b582d.js" defer></script><script src="/assets/js/2.e419600a.js" defer></script><script src="/assets/js/48.c076cc33.js" defer></script>
  </body>
</html>
