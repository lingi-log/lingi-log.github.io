<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>설계 | Lingi04</title>
    <meta name="description" content="개발 관련 이것 저것">
    
    
    <link rel="preload" href="/assets/css/0.styles.4b6fa609.css" as="style"><link rel="preload" href="/assets/js/app.e407946c.js" as="script"><link rel="preload" href="/assets/js/2.e419600a.js" as="script"><link rel="preload" href="/assets/js/42.f17281a9.js" as="script"><link rel="prefetch" href="/assets/js/10.9b348c6b.js"><link rel="prefetch" href="/assets/js/11.906833f5.js"><link rel="prefetch" href="/assets/js/12.5551473d.js"><link rel="prefetch" href="/assets/js/13.21a32bbb.js"><link rel="prefetch" href="/assets/js/14.d989253f.js"><link rel="prefetch" href="/assets/js/15.4445c3a6.js"><link rel="prefetch" href="/assets/js/16.38c19ba8.js"><link rel="prefetch" href="/assets/js/17.0f93967b.js"><link rel="prefetch" href="/assets/js/18.c07983bf.js"><link rel="prefetch" href="/assets/js/19.d75c3831.js"><link rel="prefetch" href="/assets/js/20.51cb67f6.js"><link rel="prefetch" href="/assets/js/21.9fd2d792.js"><link rel="prefetch" href="/assets/js/22.3795311d.js"><link rel="prefetch" href="/assets/js/23.db56b9e6.js"><link rel="prefetch" href="/assets/js/24.43eae32b.js"><link rel="prefetch" href="/assets/js/25.84e054fd.js"><link rel="prefetch" href="/assets/js/26.aca566ee.js"><link rel="prefetch" href="/assets/js/27.e7d87c86.js"><link rel="prefetch" href="/assets/js/28.c82c431c.js"><link rel="prefetch" href="/assets/js/29.44d288b1.js"><link rel="prefetch" href="/assets/js/3.e1f5be75.js"><link rel="prefetch" href="/assets/js/30.949eb54e.js"><link rel="prefetch" href="/assets/js/31.0f92a40c.js"><link rel="prefetch" href="/assets/js/32.0f2c7969.js"><link rel="prefetch" href="/assets/js/33.eec38aee.js"><link rel="prefetch" href="/assets/js/34.cf7380db.js"><link rel="prefetch" href="/assets/js/35.e6ffc296.js"><link rel="prefetch" href="/assets/js/36.ade4f3fb.js"><link rel="prefetch" href="/assets/js/37.3c551184.js"><link rel="prefetch" href="/assets/js/38.f70e1b20.js"><link rel="prefetch" href="/assets/js/39.a0325442.js"><link rel="prefetch" href="/assets/js/4.659e5e95.js"><link rel="prefetch" href="/assets/js/40.18742b17.js"><link rel="prefetch" href="/assets/js/41.35b3bd53.js"><link rel="prefetch" href="/assets/js/43.84580047.js"><link rel="prefetch" href="/assets/js/44.2ccc1b9f.js"><link rel="prefetch" href="/assets/js/45.bb9d83e5.js"><link rel="prefetch" href="/assets/js/46.06790008.js"><link rel="prefetch" href="/assets/js/47.3fdeb261.js"><link rel="prefetch" href="/assets/js/48.3725fb7b.js"><link rel="prefetch" href="/assets/js/49.edc41a78.js"><link rel="prefetch" href="/assets/js/5.fdb230f5.js"><link rel="prefetch" href="/assets/js/50.51968709.js"><link rel="prefetch" href="/assets/js/51.1ffe25a8.js"><link rel="prefetch" href="/assets/js/52.793981ef.js"><link rel="prefetch" href="/assets/js/53.0ca601ab.js"><link rel="prefetch" href="/assets/js/54.5188675d.js"><link rel="prefetch" href="/assets/js/55.95c53577.js"><link rel="prefetch" href="/assets/js/56.3001f847.js"><link rel="prefetch" href="/assets/js/57.ddff5baf.js"><link rel="prefetch" href="/assets/js/58.e3460e5f.js"><link rel="prefetch" href="/assets/js/59.6fbdcea7.js"><link rel="prefetch" href="/assets/js/6.7fb74477.js"><link rel="prefetch" href="/assets/js/60.e5bd2ae8.js"><link rel="prefetch" href="/assets/js/61.a1d85b3a.js"><link rel="prefetch" href="/assets/js/62.9b9a4e33.js"><link rel="prefetch" href="/assets/js/63.cea753e8.js"><link rel="prefetch" href="/assets/js/64.a6a2f2dd.js"><link rel="prefetch" href="/assets/js/65.ce47555e.js"><link rel="prefetch" href="/assets/js/66.65b35691.js"><link rel="prefetch" href="/assets/js/67.0ba69ccd.js"><link rel="prefetch" href="/assets/js/68.136eb1da.js"><link rel="prefetch" href="/assets/js/69.7edb7a8f.js"><link rel="prefetch" href="/assets/js/7.ee25bf2f.js"><link rel="prefetch" href="/assets/js/70.93efbd8b.js"><link rel="prefetch" href="/assets/js/71.c400815e.js"><link rel="prefetch" href="/assets/js/72.46bd2388.js"><link rel="prefetch" href="/assets/js/73.c2b9c619.js"><link rel="prefetch" href="/assets/js/74.a63c6f52.js"><link rel="prefetch" href="/assets/js/75.f787d27a.js"><link rel="prefetch" href="/assets/js/76.a9cf05ef.js"><link rel="prefetch" href="/assets/js/77.0a86dbfa.js"><link rel="prefetch" href="/assets/js/78.f8b3c071.js"><link rel="prefetch" href="/assets/js/79.922fd488.js"><link rel="prefetch" href="/assets/js/8.20bc98a5.js"><link rel="prefetch" href="/assets/js/80.f8b380ef.js"><link rel="prefetch" href="/assets/js/81.bbc4468d.js"><link rel="prefetch" href="/assets/js/82.8e111f72.js"><link rel="prefetch" href="/assets/js/83.5f4245e9.js"><link rel="prefetch" href="/assets/js/84.c5b8b083.js"><link rel="prefetch" href="/assets/js/85.62d36c14.js"><link rel="prefetch" href="/assets/js/86.d43fbcd3.js"><link rel="prefetch" href="/assets/js/87.b9a3fae5.js"><link rel="prefetch" href="/assets/js/88.d92ed0e8.js"><link rel="prefetch" href="/assets/js/89.f2cfd44b.js"><link rel="prefetch" href="/assets/js/9.e23b2fec.js"><link rel="prefetch" href="/assets/js/90.6662a399.js"><link rel="prefetch" href="/assets/js/91.bd9a2f0c.js"><link rel="prefetch" href="/assets/js/92.a626ebab.js"><link rel="prefetch" href="/assets/js/93.b75c7c80.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b6fa609.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/thumbnail.png" alt="Lingi04" class="logo"> <span class="site-name can-hide">Lingi04</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link router-link-active">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link router-link-active">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Experiences</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/experiences/1-deadlock_exception.html" class="sidebar-link">Deadlock 현상 해결</a></li><li><a href="/experiences/2-Autowired와_AOP.html" class="sidebar-link">Autowired와 AOP를 함께 사용할 때 주의 해야 할 점</a></li><li><a href="/experiences/3-kill과_trap.html" class="sidebar-link">Kill과 trap</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>깨끗한 코드</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="설계">설계</h1> <p>개발 들어가기 앞서 요구사항을 완벽히 분석하고 설계한 후 개발에 들어가진 못했다. 변명을 하자면... 그런 습관이 잘 들어있지 않았고 시간이 부족했다. 그래서 개발을 하다가 더 좋은 방법이 생각나 중간 중간 변경하기도 했다. 채점자 리뷰에서도 이 부분과 관련해 지적을 받은게 있어서 앞으로 설계에 대해 신경을 좀 더 써야겠다고 생각했다.</p> <h2 id="db-설계">DB 설계</h2> <h3 id="테이블">테이블</h3> <table><thead><tr><th>테이블 이름</th> <th>역할</th></tr></thead> <tbody><tr><td>song</td> <td>노래 정보 저장</td></tr> <tr><td>album</td> <td>앨범정보 저장</td></tr> <tr><td>playlist</td> <td>playlist 정보 저장</td></tr> <tr><td>playlist_song</td> <td>playlist와 playlist에 들어있는 곡 정보를 담고 있는 테이블</td></tr></tbody></table> <h3 id="테이블간-관계">테이블간 관계</h3> <p>한개의 앨범에 여러 노래가 담길 수 있으니 album과 song의 관계는 1:n 관계로 간단하게 정했다. playlist와 song의 관계를 정할 때 조금 멈칫했다. 한개의 playlist에는 여러 song이 담길 수 있고, 한개의 노래가 여러 플레이리스트에 속할 수도 있다. m:n 관계인데, 표현 하기가 어려울 것 같아 playlist_song 테이블을 만들고 song과 playlist_song 1:n 관계로, playlist_song과 playlist는 n:1관계로 정리하였다.</p> <p><img src="https://github.com/lingi04/lingi04/blob/master/assets/images/experiences/homework-review/erd.png?raw=true" alt="erd"></p> <table><thead><tr><th>테이블</th> <th>관계</th></tr></thead> <tbody><tr><td>album - song</td> <td>1:n</td></tr> <tr><td>song - playlist_song</td> <td>1:n</td></tr> <tr><td>playlist_song - playlist</td> <td>n:1</td></tr></tbody></table> <h2 id="공통-기능-설계">공통 기능 설계</h2> <h3 id="공통-변수">공통 변수</h3> <p>전역으로 사용할 수 있는 변수를 뽑아서 모아놓았다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Constants</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">OrderBy</span><span class="token punctuation">{</span>
        <span class="token function">ASC</span><span class="token punctuation">(</span><span class="token string">&quot;ASC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Asc Order&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">DESC</span><span class="token punctuation">(</span><span class="token string">&quot;DESC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Desc Order&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> value<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> reasonPhrase<span class="token punctuation">;</span>

        <span class="token class-name">OrderBy</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">String</span> reasonPhrase<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>reasonPhrase <span class="token operator">=</span> reasonPhrase<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> ROW_PER_PAGE <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="예외처리">예외처리</h3> <p>예외처리를 한곳에서 할 수 있도록 <code>@ControllerAdvice</code> 어노테이션을 붙여 ExceptionAdvice 클래스를 만들었다. 발생한 Exception의 처리를 한다. 예외처리를 한 곳에 몰아놓는 것과 발생한 자리에서 catch 한 후 처리하는 것 사이에 어떤게 나은지는 잘 모르겠다. 각 장단점이 있는 것 같은데, 실무에선 팀원들과 어떻게 할지 상의한 후 결정한다면 어느 방향을 사용하던 상관없을 것 같다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExceptionAdvice</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">BindException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">requestParamValidationError</span><span class="token punctuation">(</span><span class="token class-name">BindException</span> exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">bindResult</span><span class="token punctuation">(</span>exception<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="response-body-정리">Response body 정리</h3> <p>보통 API 설계할 때 공통 폼이 있다. 이번 과제를 하며 내 경우는 간단하게</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;statusCode&quot;</span><span class="token operator">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
    <span class="token string">&quot;errorMsg&quot;</span><span class="token operator">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>에러 발생한 경우<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이런 식으로 정의했다.</p> <p>공통으로 사용할 형식을 정의했기에 재사용하며 사용할 수 있는 클래스를 만들기로 했고, <code>ResponseBody</code>클래스를 만들었다. 그리고 여기에 <em>Builder패턴</em>을 적용했다. 한번 사용해보고 싶기도 했고,</p> <ul><li>생성자 방식과 비교해선 필요한 파라미터만 골라서 넘길 수 있다는 장점이
<ul><li>지금 경우엔 해당되지 않지만, 같은 타입의 파라미터가 여러 개 존재할 때 파라미터의 순서를 헷갈릴 수도 있고, 필요한 파라미터에 따라 생성자를 여러 개 만들어야 한다는 수고로움이 있을 수 있다.</li></ul></li> <li>setter방법 보단 좀 더 간단하게 사용할 수 있을것
<ul><li>생성자로 생성 후 세터를 또 호출</li> <li>(솔직히 이건 좀 억지같긴 하다...)</li></ul></li></ul> <p>같았기 때문이다.</p> <h3 id="페이징-처리">페이징 처리</h3> <p>페이징은 보통 쿼리 에서 <code>limit</code>과 <code>order by</code>를 이용해서 한다. 얼마전에 잠깐 jpa를 공부해 봤는데, jpa에서는 <code>Paging</code>이라는 객체를 넘기면 알아서 해주는 것을 보고 비슷하게 적용해봐야겠다 생각했다. 그래서 <code>Order</code>, <code>Paging</code> 클래스를 만들었고, 쿼리 실행 시 넘기는 파라미터 dto클래스에 조합해서 사용하는 방식으로 개발 했다. 좀 더 나은 방식으로 개발할 수 있었을것 같은데 조금 아쉽다.</p> <h2 id="api-설계">API 설계</h2> <p>여기에 사용된 도메인은 이렇게 분류할 수 있을 것 같다.</p> <ul><li>앨범 관련
<ul><li>album, song</li></ul></li> <li>플레이리스트 관련
<ul><li>playlist, playlistSong</li></ul></li></ul> <p>따라서 패키지도 album 패키지와 playlist 패키지로 나누었다.</p> <h3 id="공통">공통</h3> <ul><li>파라미터 검증에서 조건에 맞지 않으면 예외를 발생시킨다.
<ul><li><code>@Valid</code>어노테이션, 기타 다른 어노테이션</li></ul></li> <li>리턴 타입으로 <code>ResponseEntity&lt;?&gt;</code>, 위에 언급한 <code>ResponseBody</code>를 사용했다.</li> <li>Http 메소드와 HttpStatusCode를 상황에 맞게 알맞은 값을 사용하도록 노력했다.
<table><thead><tr><th>기능</th> <th>Http Method</th> <th>Http Status Code</th></tr></thead> <tbody><tr><td>생성</td> <td>Post</td> <td>HttpStatus.CREATED</td></tr> <tr><td>조회</td> <td>Get</td> <td>HttpStatus.OK</td></tr> <tr><td>수정</td> <td>Put</td> <td>HttpStatus.CREATED</td></tr></tbody></table></li> <li><h3 id="공통-헤더">공통 헤더</h3> <table><thead><tr><th>헤더명</th> <th>값</th> <th>필수 여부</th></tr></thead> <tbody><tr><td>Content-Type</td> <td>application/json</td> <td>필수</td></tr> <tr><td>UserId</td> <td>{userId}</td> <td>필수</td></tr></tbody></table></li> <li><h3 id="공통-response">공통 Response</h3> <table><thead><tr><th>필드</th> <th>필드명</th> <th>설명</th></tr></thead> <tbody><tr><td>statusCode</td> <td>상태코드</td> <td>요청에 대한 결과를 HttpStatus Code로 내려준다.</td></tr> <tr><td>errMsg</td> <td>에러메시지</td> <td>에러가 생길 경우 에러 메시지가 세팅된다.</td></tr> <tr><td>data</td> <td>데이터</td> <td>요청에 대한 결과 데이터.</td></tr></tbody></table></li></ul> <h3 id="_1-album">1. album</h3> <ul><li>앨범 관련 요청을 처리한다.</li> <li>/album, /search 등...</li></ul> <h3 id="_2-playlist">2. playlist</h3> <ul><li><p>플레이리스트 관련 요청을 처리한다.</p></li> <li><p><code>/api/playlist/*</code></p></li> <li><h3 id="playlist-생성-api">Playlist 생성 API</h3> <p><code>POST /api/playlist</code></p> <ul><li><h3 id="http-request">HTTP REQUEST</h3> <div class="language- extra-class"><pre class="language-text"><code>POST /api/playlist HTTP/1.1
Host: localhost:5000
Content-Type: application/json
UserId: 1

{
    &quot;playlistName&quot;:&quot;new playlist&quot;
}
</code></pre></div></li> <li><h3 id="파라미터">파라미터</h3> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>필수 여부</th></tr></thead> <tbody><tr><td>playlistName</td> <td>생성할 playlist의 이름</td> <td>필수</td></tr></tbody></table></li> <li><h3 id="http-response">HTTP RESPONSE</h3> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 201 CREATED
Content-Length: 224
Content-Type: application/json;charset=UTF-8

{
    &quot;statusCode&quot;: 201,
    &quot;data&quot;: {
        &quot;playlist&quot;: {
            &quot;userId&quot;: 1,
            &quot;playlistName&quot;: &quot;new playlist&quot;,
            &quot;id&quot;: 16
        }
    }
}
</code></pre></div></li> <li><h3 id="response-필드">Response 필드</h3> <table><thead><tr><th>필드</th> <th>설명</th></tr></thead> <tbody><tr><td>data.playlist.id</td> <td>생성된 플레이리스트의 아이디</td></tr> <tr><td>data.playlist.playlistName</td> <td>생성된 플레이리스트의 이름</td></tr> <tr><td>data.playlist.userId</td> <td>유저 아이디</td></tr></tbody></table></li></ul></li> <li><h3 id="playlist-노래-앨범-추가-api">Playlist 노래, 앨범 추가 API</h3> <ul><li><h3 id="노래-개별-추가">노래 개별 추가</h3> <p><code>POST /api/playlist/{playlistId}/song</code></p></li> <li><h3 id="path-variable">Path Variable</h3> <table><thead><tr><th>Path Variable</th> <th>Description</th> <th>필수 여부</th></tr></thead> <tbody><tr><td>playlistId</td> <td>플레이리스트 id</td> <td>필수</td></tr></tbody></table></li> <li><h3 id="http-request-2">HTTP REQUEST</h3> <div class="language- extra-class"><pre class="language-text"><code>POST /api/playlist/14/song HTTP/1.1
Host: localhost:5000
Content-Type: application/json
UserId: 1

{
    &quot;songId&quot;:101,
    &quot;albumId&quot;:13
}
</code></pre></div></li> <li><h3 id="파라미터-2">파라미터</h3> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>필수 여부</th></tr></thead> <tbody><tr><td>songId</td> <td>내 플레이리스트에 추가할 노래의 id</td> <td>필수</td></tr> <tr><td>albumId</td> <td>내 플레이리스트에 추가할 노래의 albumId</td> <td>필수</td></tr></tbody></table></li> <li><h3 id="http-response-2">HTTP RESPONSE</h3> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 201 CREATED
Content-Length: 230
Content-Type: application/json;charset=UTF-8

{
    &quot;statusCode&quot;: 201,
    &quot;data&quot;: {
        &quot;playlistSong&quot;: {
            &quot;id&quot;: 154,
            &quot;playlistId&quot;: 14,
            &quot;songId&quot;: 101,
            &quot;albumId&quot;: 13
        }
    }
}
</code></pre></div></li> <li><h3 id="response-필드-2">Response 필드</h3> <table><thead><tr><th>필드</th> <th>설명</th></tr></thead> <tbody><tr><td>data.playlistSong[].id</td> <td>생성된 playlistSong의 아이디</td></tr> <tr><td>data.playlistSong[].playlistId</td> <td>노래가 추가된 playlist의 아이디</td></tr> <tr><td>data.playlistSong[].songId</td> <td>노래 아이디</td></tr> <tr><td>data.playlistSong[].albumId</td> <td>앨범 아이디</td></tr></tbody></table></li> <li><h3 id="노래-앨범단위로-추가">노래 앨범단위로 추가</h3> <p><code>POST /api/playlist/{playlistId}/album</code></p></li> <li><h3 id="path-variable-2">Path Variable</h3> <table><thead><tr><th>Path Variable</th> <th>Description</th> <th>필수 여부</th></tr></thead> <tbody><tr><td>playlistId</td> <td>플레이리스트 id</td> <td>필수</td></tr></tbody></table></li> <li><h3 id="http-request-3">HTTP REQUEST</h3> <div class="language- extra-class"><pre class="language-text"><code>POST /api/playlist/14/album HTTP/1.1
Host: localhost:5000
Content-Type: application/json
UserId: 1

{&quot;albumId&quot;:14}
</code></pre></div></li> <li><h3 id="파라미터-3">파라미터</h3> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>필수 여부</th></tr></thead> <tbody><tr><td>albumId</td> <td>내 플레이리스트에 추가할 노래의 albumId</td> <td>필수</td></tr></tbody></table></li> <li><h3 id="http-response-3">HTTP RESPONSE</h3> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 201 CREATED
Content-Length: 742
Content-Type: application/json;charset=UTF-8

{
    &quot;statusCode&quot;: 201,
    &quot;data&quot;: {
        &quot;playlistSong&quot;: [
            {
                &quot;id&quot;: 155,
                &quot;playlistId&quot;: 14,
                &quot;songId&quot;: 111,
                &quot;albumId&quot;: 14
            },
            {
                &quot;id&quot;: 0,
                &quot;playlistId&quot;: 14,
                &quot;songId&quot;: 112,
                &quot;albumId&quot;: 14
            },
            ...
            {
                &quot;id&quot;: 165,
                &quot;playlistId&quot;: 14,
                &quot;songId&quot;: 121,
                &quot;albumId&quot;: 14
            }
        ]
    }
}
</code></pre></div></li> <li><h3 id="response-필드-3">Response 필드</h3> <table><thead><tr><th>필드</th> <th>설명</th></tr></thead> <tbody><tr><td>data.playlistSong[].id</td> <td>생성된 playlistSong의 아이디</td></tr> <tr><td>data.playlistSong[].playlistId</td> <td>노래가 추가된 playlist의 아이디</td></tr> <tr><td>data.playlistSong[].songId</td> <td>노래 아이디</td></tr> <tr><td>data.playlistSong[].albumId</td> <td>앨범 아이디</td></tr></tbody></table></li> <li><h3 id="playlist-목록-api">Playlist 목록 API</h3> <p><code>GET /api/playlist</code></p></li> <li><h3 id="http-request-4">HTTP REQUEST</h3> <div class="language- extra-class"><pre class="language-text"><code>GET /api/playlist HTTP/1.1
Host: localhost:5000
UserId: 1
</code></pre></div></li> <li><h3 id="http-response-4">HTTP RESPONSE</h3> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 200 OK
Content-Length: 265
Content-Type: application/json;charset=UTF-8
{
    &quot;statusCode&quot;: 200,
    &quot;data&quot;: {
        &quot;playlist&quot;: [
            {
                &quot;userId&quot;: 1,
                &quot;playlistName&quot;: &quot;abcde&quot;,
                &quot;id&quot;: 14
            },
            {
                &quot;userId&quot;: 1,
                &quot;playlistName&quot;: &quot;new playlist&quot;,
                &quot;id&quot;: 16
            }
        ]
    }
}
</code></pre></div></li> <li><h3 id="response-필드-4">Response 필드</h3> <table><thead><tr><th>필드</th> <th>설명</th></tr></thead> <tbody><tr><td>data.playlist[].id</td> <td>playlist의 아이디</td></tr> <tr><td>data.playlist[].playlistName</td> <td>playlist의 이름</td></tr> <tr><td>data.playlist[].userId</td> <td>사용자 id</td></tr></tbody></table></li></ul></li> <li><h3 id="playlist-삭제-api">Playlist 삭제 API</h3> <p><code>DELETE /api/playlist/{playlistId}</code></p> <ul><li><h3 id="path-variable-3">Path Variable</h3> <table><thead><tr><th>Path Variable</th> <th>Description</th> <th>필수 여부</th></tr></thead> <tbody><tr><td>playlistId</td> <td>플레이리스트 id</td> <td>필수</td></tr></tbody></table></li> <li><h3 id="http-request-5">HTTP REQUEST</h3> <div class="language- extra-class"><pre class="language-text"><code>DELETE /api/playlist/15 HTTP/1.1
Host: localhost:5000
UserId: 1
Content-Type: application/json

</code></pre></div></li> <li><h3 id="http-response-5">HTTP RESPONSE</h3> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 200 OK
Content-Length: 148
</code></pre></div></li></ul></li></ul> <h2 id="컨벤션">컨벤션</h2> <ul><li>카멜케이스</li> <li>ResponseBody 정의</li> <li>쿼리 앞부분에 /* mapperName.queryId */ 형식으로 주석 추가</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/2/2020, 10:47:53 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e407946c.js" defer></script><script src="/assets/js/2.e419600a.js" defer></script><script src="/assets/js/42.f17281a9.js" defer></script>
  </body>
</html>
