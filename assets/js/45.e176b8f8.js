(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{230:function(t,s,a){"use strict";a.r(s);var n=a(0),p=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"kill-과-trap"}},[t._v("kill 과 trap")]),t._v(" "),a("blockquote",[a("p",[t._v("kill : process를 죽이는 명령어 이다."),a("br"),t._v(" "),a("code",[t._v("kill -9 pid")]),t._v(" 형태로 주로 사용했는데,"),a("br"),t._v("\nkill 옵션과 signal을 받아 제어할 수 있는 "),a("code",[t._v("trap")]),t._v(" 명령에 대해 알아본 내용을 정리하려고 한다.")])]),t._v(" "),a("h2",{attrs:{id:"kill-명령어"}},[t._v("kill 명령어")]),t._v(" "),a("ul",[a("li",[t._v("프로세스에 특정한 signal을 보내는 명령어.")])]),t._v(" "),a("h2",{attrs:{id:"kill의-다양한-옵션들"}},[t._v("kill의 다양한 옵션들")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("kill -l")]),t._v(" 을 입력하면 kill 의 다양한 옵션들을 사용할 수 있다.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v(" 1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGHUP       2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGINT       3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGQUIT      4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGILL       5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGTRAP\n 6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGABRT      7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGBUS       8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGFPE       9"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGKILL     10"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGUSR1\n11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGSEGV     12"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGUSR2     13"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGPIPE     14"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGALRM     15"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGTERM\n16"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGSTKFLT   17"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGCHLD     18"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGCONT     19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGSTOP     20"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGTSTP\n21"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGTTIN     22"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGTTOU     23"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGURG      24"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGXCPU     25"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGXFSZ\n26"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGVTALRM   27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGPROF     28"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGWINCH    29"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGIO       30"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGPWR\n31"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGSYS      34"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN    35"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+1  36"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+2  37"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+3\n38"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+4  39"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+5  40"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+6  41"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+7  42"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+8\n43"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+9  44"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+10 45"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+11 46"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+12 47"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+13\n48"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+14 49"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMIN+15 50"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-14 51"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-13 52"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-12\n53"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-11 54"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-10 55"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-9  56"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-8  57"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-7\n58"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-6  59"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-5  60"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-4  61"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-3  62"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-2\n63"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX-1  64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SIGRTMAX\n")])])]),a("ul",[a("li",[t._v("지금은 "),a("code",[t._v("9(SIGKILL)")]),t._v(", "),a("code",[t._v("15(SIGTERM)")]),t._v(" 에 대해 알아보았다.")])]),t._v(" "),a("h3",{attrs:{id:"sigkill-9"}},[t._v("SIGKILL - 9")]),t._v(" "),a("ul",[a("li",[t._v("해당 프로세스의 실행을 강제로 중지한다. "),a("code",[t._v("TERM")]),t._v(" 시그널로 종료되지 않는 프로세스도 이 시그널로 강제 종료할 수 있다.")])]),t._v(" "),a("h3",{attrs:{id:"sigterm-15"}},[t._v("SIGTERM - 15")]),t._v(" "),a("ul",[a("li",[t._v("정상적인 종료 프로세스에 정의되어 있는 정상적인 종료 방법에 읳 ㅐ프로세스를 종료하게 되다. kill 명령어에 특별한 시그널을 붙이지 않으면 이 시그널을 이용하여 프로세스를 종료함.")])]),t._v(" "),a("h2",{attrs:{id:"trap-명령어"}},[t._v("trap 명령어")]),t._v(" "),a("ul",[a("li",[t._v("signal이 도착했을 때 프로그램이 어떤 반응을 할 지 관리하도록 하는 명령.")])]),t._v(" "),a("blockquote",[a("h3",{attrs:{id:"signal"}},[t._v("signal")]),t._v(" "),a("ul",[a("li",[t._v("비동기 메시지로 정의됨.")]),t._v(" "),a("li",[t._v("하나의 프로세스 에서 다른 프로세스로 보낼 수 있는 숫자.")]),t._v(" "),a("li",[t._v("어떤 키가 눌러졌거나, 예외가 발생하면 운영체제에서 처리함.")])])]),t._v(" "),a("h3",{attrs:{id:"사용-예시"}},[t._v("사용 예시")]),t._v(" "),a("ul",[a("li",[t._v("term signal이 도착했을 때, 하던 작업을 모두 완료 한 후 process를 죽여야 했다.")]),t._v(" "),a("li",[t._v("해당 sh 파일은 while로 한번 실행되면 멈추지 않고 실행된다.")]),t._v(" "),a("li",[a("code",[t._v("TERM_SIGNAL")]),t._v("이라는 플래그를 정의하고, "),a("code",[t._v("SIGTERM")]),t._v("이 왔을 때 플래그를 변경, sh 파일 맨 끝에 종료하는 로직을 구현하였다.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# trap for graceful shutdown")]),t._v("\nTERM_SIGNAL"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"N"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" gracefully_shutdown "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        TERM_SIGNAL"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Y"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("trap")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gracefully_shutdown'")]),t._v(" TERM\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TERM_SIGNAL")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Y"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\t\n")])])])])},[],!1,null,null,null);s.default=p.exports}}]);