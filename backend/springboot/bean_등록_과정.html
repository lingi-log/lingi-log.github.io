<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Bean의 등록 과정 | Lingi04</title>
    <meta name="description" content="개발 관련 이것 저것">
    
    
    <link rel="preload" href="/assets/css/0.styles.4b6fa609.css" as="style"><link rel="preload" href="/assets/js/app.e407946c.js" as="script"><link rel="preload" href="/assets/js/2.e419600a.js" as="script"><link rel="preload" href="/assets/js/3.e1f5be75.js" as="script"><link rel="prefetch" href="/assets/js/10.9b348c6b.js"><link rel="prefetch" href="/assets/js/11.906833f5.js"><link rel="prefetch" href="/assets/js/12.5551473d.js"><link rel="prefetch" href="/assets/js/13.21a32bbb.js"><link rel="prefetch" href="/assets/js/14.d989253f.js"><link rel="prefetch" href="/assets/js/15.4445c3a6.js"><link rel="prefetch" href="/assets/js/16.38c19ba8.js"><link rel="prefetch" href="/assets/js/17.0f93967b.js"><link rel="prefetch" href="/assets/js/18.c07983bf.js"><link rel="prefetch" href="/assets/js/19.d75c3831.js"><link rel="prefetch" href="/assets/js/20.51cb67f6.js"><link rel="prefetch" href="/assets/js/21.9fd2d792.js"><link rel="prefetch" href="/assets/js/22.3795311d.js"><link rel="prefetch" href="/assets/js/23.db56b9e6.js"><link rel="prefetch" href="/assets/js/24.43eae32b.js"><link rel="prefetch" href="/assets/js/25.84e054fd.js"><link rel="prefetch" href="/assets/js/26.aca566ee.js"><link rel="prefetch" href="/assets/js/27.e7d87c86.js"><link rel="prefetch" href="/assets/js/28.c82c431c.js"><link rel="prefetch" href="/assets/js/29.44d288b1.js"><link rel="prefetch" href="/assets/js/30.949eb54e.js"><link rel="prefetch" href="/assets/js/31.0f92a40c.js"><link rel="prefetch" href="/assets/js/32.0f2c7969.js"><link rel="prefetch" href="/assets/js/33.eec38aee.js"><link rel="prefetch" href="/assets/js/34.cf7380db.js"><link rel="prefetch" href="/assets/js/35.e6ffc296.js"><link rel="prefetch" href="/assets/js/36.ade4f3fb.js"><link rel="prefetch" href="/assets/js/37.3c551184.js"><link rel="prefetch" href="/assets/js/38.f70e1b20.js"><link rel="prefetch" href="/assets/js/39.a0325442.js"><link rel="prefetch" href="/assets/js/4.659e5e95.js"><link rel="prefetch" href="/assets/js/40.18742b17.js"><link rel="prefetch" href="/assets/js/41.35b3bd53.js"><link rel="prefetch" href="/assets/js/42.f17281a9.js"><link rel="prefetch" href="/assets/js/43.84580047.js"><link rel="prefetch" href="/assets/js/44.2ccc1b9f.js"><link rel="prefetch" href="/assets/js/45.bb9d83e5.js"><link rel="prefetch" href="/assets/js/46.06790008.js"><link rel="prefetch" href="/assets/js/47.3fdeb261.js"><link rel="prefetch" href="/assets/js/48.3725fb7b.js"><link rel="prefetch" href="/assets/js/49.edc41a78.js"><link rel="prefetch" href="/assets/js/5.fdb230f5.js"><link rel="prefetch" href="/assets/js/50.51968709.js"><link rel="prefetch" href="/assets/js/51.1ffe25a8.js"><link rel="prefetch" href="/assets/js/52.793981ef.js"><link rel="prefetch" href="/assets/js/53.0ca601ab.js"><link rel="prefetch" href="/assets/js/54.5188675d.js"><link rel="prefetch" href="/assets/js/55.95c53577.js"><link rel="prefetch" href="/assets/js/56.3001f847.js"><link rel="prefetch" href="/assets/js/57.ddff5baf.js"><link rel="prefetch" href="/assets/js/58.e3460e5f.js"><link rel="prefetch" href="/assets/js/59.6fbdcea7.js"><link rel="prefetch" href="/assets/js/6.7fb74477.js"><link rel="prefetch" href="/assets/js/60.e5bd2ae8.js"><link rel="prefetch" href="/assets/js/61.a1d85b3a.js"><link rel="prefetch" href="/assets/js/62.9b9a4e33.js"><link rel="prefetch" href="/assets/js/63.cea753e8.js"><link rel="prefetch" href="/assets/js/64.a6a2f2dd.js"><link rel="prefetch" href="/assets/js/65.ce47555e.js"><link rel="prefetch" href="/assets/js/66.65b35691.js"><link rel="prefetch" href="/assets/js/67.0ba69ccd.js"><link rel="prefetch" href="/assets/js/68.136eb1da.js"><link rel="prefetch" href="/assets/js/69.7edb7a8f.js"><link rel="prefetch" href="/assets/js/7.ee25bf2f.js"><link rel="prefetch" href="/assets/js/70.93efbd8b.js"><link rel="prefetch" href="/assets/js/71.c400815e.js"><link rel="prefetch" href="/assets/js/72.46bd2388.js"><link rel="prefetch" href="/assets/js/73.c2b9c619.js"><link rel="prefetch" href="/assets/js/74.a63c6f52.js"><link rel="prefetch" href="/assets/js/75.f787d27a.js"><link rel="prefetch" href="/assets/js/76.a9cf05ef.js"><link rel="prefetch" href="/assets/js/77.0a86dbfa.js"><link rel="prefetch" href="/assets/js/78.f8b3c071.js"><link rel="prefetch" href="/assets/js/79.922fd488.js"><link rel="prefetch" href="/assets/js/8.20bc98a5.js"><link rel="prefetch" href="/assets/js/80.f8b380ef.js"><link rel="prefetch" href="/assets/js/81.bbc4468d.js"><link rel="prefetch" href="/assets/js/82.8e111f72.js"><link rel="prefetch" href="/assets/js/83.5f4245e9.js"><link rel="prefetch" href="/assets/js/84.c5b8b083.js"><link rel="prefetch" href="/assets/js/85.62d36c14.js"><link rel="prefetch" href="/assets/js/86.d43fbcd3.js"><link rel="prefetch" href="/assets/js/87.b9a3fae5.js"><link rel="prefetch" href="/assets/js/88.d92ed0e8.js"><link rel="prefetch" href="/assets/js/89.f2cfd44b.js"><link rel="prefetch" href="/assets/js/9.e23b2fec.js"><link rel="prefetch" href="/assets/js/90.6662a399.js"><link rel="prefetch" href="/assets/js/91.bd9a2f0c.js"><link rel="prefetch" href="/assets/js/92.a626ebab.js"><link rel="prefetch" href="/assets/js/93.b75c7c80.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b6fa609.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/thumbnail.png" alt="Lingi04" class="logo"> <span class="site-name can-hide">Lingi04</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link router-link-active">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Spring Boot</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/springboot/annotation.html" class="sidebar-link">Spring Boot Annotation 정리</a></li><li><a href="/backend/springboot/jpa.html" class="sidebar-link">JPA(Java Persistence API)</a></li><li><a href="/backend/springboot/pojo-javabeans-vo-dto.html" class="sidebar-link">POJO vs JAVA BEANS vs VO vs DTO</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Spring Security</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Elastic Search</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/es/1_세팅.html" class="sidebar-link">Elasticsearch 세팅 정리</a></li><li><a href="/backend/es/2_매핑.html" class="sidebar-link">매핑</a></li><li><a href="/backend/es/4_DB와 비교.html" class="sidebar-link">RDB와 ElasticSearch의 관계</a></li><li><a href="/backend/es/5_성능최적화.html" class="sidebar-link">성능 최적화</a></li><li><a href="/backend/es/6_alias.html" class="sidebar-link">alias 설정</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>OAuth2</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/oauth2/1_overview.html" class="sidebar-link">OAuth2 알아보기</a></li><li><a href="/backend/oauth2/2_grant_type.html" class="sidebar-link">OAuth2 Grant Type</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="bean의-등록-과정">Bean의 등록 과정</h1> <p>ApplicationContext 부터 천천히 따라가며 Bean이 어떤 과정을 통해 등록 되는 지 알아보자.</p> <h2 id="applicationcontext">ApplicationContext</h2> <p><img src="/assets/img/applicationContext_classdiagram.a6623e5f.png" alt="applicationContext_classdiagram"></p> <p>BeanFactory를 상속 받은 HierarchicalBeanFatory, ListaableBeanFactory를 상속 받고 있고, 또한 다른 여러 인터페이스도 상속받고 있다.</p> <p>ApplicationContext는 Bean을 등록하고 가져오는데 쓰이는 것으로만 생각하고 있었으나, 소스를 열어보니 그렇지 않았다.</p> <p>실제로 ApplicationContext의 설명을 보면</p> <blockquote><p>Application의 Component에 접근할 수 있는 BeanFactory 메서드 제공<br>
    - ListableBeanFactory 인터페이스<br>
포괄적인 방식(Generic Fashion)으로 file resource를 읽을 수 있다.<br>
    - ResourceLoader 인터페이스<br>
등록 되어 있는 Listener에 event를 publish 할 수 있음<br>
    - ApplicationEventPublisher<br>
message를 resolving 할 수 있음. internationalization 지원<br>
    - MessageSource 인터페이스</p></blockquote> <p>이렇게 되어 있다. Spring 프레임워크가 지원하는 기능들이 모여 있는 것을 알 수 있다. 지금은 BeanFactory에 관해 알아보고 있으니 <strong>ApplicationContext가 BeanFactory의 기능을 어떤 방식으로 제공하는 지</strong> 중심으로 알아보자.</p> <p>ApplicationContext의 구현체를 포함한 클래스다이어그램을 살펴보면(여러 구현체 중 AnnotationConfigApplicationContext만 가져와 보았다.) 앞선 클래스 다이어그램에서 <strong>ConfigurableApplicationContext</strong>, <strong>AbstractApplicationContext</strong>, <strong>AnnotationConfigApplicationContext</strong> 등등 여러 인터페이스와 클래스가 추가 되어 있는 것을 확인할 수 있다.</p> <p><img src="/assets/img/applicationContext_classdiagram2.7c2ddf26.png" alt="ds"></p> <h2 id="bean의-등록은-어디에서">Bean의 등록은 어디에서?</h2> <p>처음엔 ApplicationContext가 BeanFactory를 상속받고 있으므로 ApplicationContext의 구현체에서 직접 Bean을 등록할 것으로 생각했으나, 소스를 살펴본 결과 그렇지 않았다.</p> <p><strong>AnnotationConfigApplicationContext</strong>을 살펴보면,</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnotationConfigApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">GenericApplicationContext</span> <span class="token keyword">implements</span> <span class="token class-name">AnnotationConfigRegistry</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AnnotatedBeanDefinitionReader</span> reader<span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ClassPathBeanDefinitionScanner</span> scanner<span class="token punctuation">;</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">//---------------------------------------------------------------------</span>
    <span class="token comment">// Implementation of AnnotationConfigRegistry</span>
    <span class="token comment">//---------------------------------------------------------------------</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> componentClasses<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notEmpty</span><span class="token punctuation">(</span>componentClasses<span class="token punctuation">,</span> <span class="token string">&quot;At least one component class must be specified&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reader<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>componentClasses<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">scan</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> basePackages<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notEmpty</span><span class="token punctuation">(</span>basePackages<span class="token punctuation">,</span> <span class="token string">&quot;At least one base package must be specified&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scanner<span class="token punctuation">.</span><span class="token function">scan</span><span class="token punctuation">(</span>basePackages<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><strong>AnnotatedBeanDefinitionReader</strong>, <strong>ClassPathBeanDefinitionScanner</strong>가 필드로 선언되어 있는데, 각 클래스는 <code>register(Class...)</code> 메서드와 <code>scan(String...)</code> 에서 쓰인다.</p> <p>저 외에 다른 부분을 살펴보아도 <strong>AnnotationConfigApplicationContext</strong>에서 직접 Bean을 등록하는 부분은 안보인다. <code>class 배열</code>을 받아 <strong>AnnotatedBeanDefinitionReader</strong> 를 이용해 등록하거나 <code>package 경로</code>를 받아 <strong>ClassPathBeanDefinitionScanner</strong> 를 이용해 경로를 scan 하여 bean을 등록하는 것으로 보인다. 혹시나 조상 클래스에서 구현된 로직이 있나 살펴봤지만</p> <h3 id="genericapplicationcontext-에선">GenericApplicationContext 에선</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenericApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractApplicationContext</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DefaultListableBeanFactory</span> beanFactory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">GenericApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultListableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//---------------------------------------------------------------------</span>
    <span class="token comment">// Implementation of BeanDefinitionRegistry</span>
    <span class="token comment">//---------------------------------------------------------------------</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span>
            <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span> <span class="token punctuation">{</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>registerBeanDefinition</code>에서 <strong>DefaultListableBeanFactory</strong>의 <code>registerBeanDefinition</code> 메서드를 호출하며 bean 등록하는 역할(?)을 <strong>DefaultListableBeanFactory에 위임(?)</strong> 하고 있었고,</p> <h3 id="abstractapplicationcontext-에서는">AbstractApplicationContext 에서는</h3> <p>bean을 등록하는 부분이 보이지 않았다.</p> <blockquote><p>BeanFactory 에서 bean을 등록하는 줄 알았는데 소스를 보면 그게 아닌것 같다. <strong>GenericApplicationContext</strong> 를 보면 <strong>BeanDefinitionRegistry</strong>를 구현하고 있는데, 여기서 제공하는 <code>registerBeanDefinition</code>메서드가 bean의 등록을 책임지는것 같다.</p></blockquote> <p>자... 그럼 이제 <strong>DefaultListableBeanFactory</strong>에 대해 알아보자</p> <h3 id="defaultlistablebeanfactory">DefaultListableBeanFactory</h3> <p><img src="/assets/img/defaultListableBeanFactory_classdiagram.1594ead5.png" alt="defaultListableBeanFactory"></p> <p>지금 까지 알아본 바로, ApplicationContext의 구현체는 BeanDefinitionRegistry 인터페이스를 구현하며, 내부적으로 DefaultListableBeanFactory 클래스에 Bean 등록의 책임을 위임하고 있다.</p> <p><strong>DefaultListableBeanFactory</strong>를 살펴봤는데, <strong>BeanDefinitionRegistry</strong> 등 여러 인터페이스를 구현하고 있었으며, Bean을 등록하는 데 필요한 모든 기능을 갖춘 유일한 클래스 인것 같다(BeanFactory의 다른 구현체가 있긴 함).</p> <p>그 중 Bean을등록할 때 사용 되는(BeanDefinitionRegistry의 메서드) <code>registerBeanDefinition</code> 메서드를 살펴보자.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultListableBeanFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAutowireCapableBeanFactory</span>
		<span class="token keyword">implements</span> <span class="token class-name">ConfigurableListableBeanFactory</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span>
            <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span> <span class="token punctuation">{</span>

        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token class-name">BeanDefinition</span> existingDefinition <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>beanDefinitionMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>existingDefinition <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
            <span class="token comment">////////////////////////////////////////////////////</span>
            <span class="token comment">//                     이 부분                      //</span>
            <span class="token comment">////////////////////////////////////////////////////</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>beanDefinitionMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>드디어 찾았다. bean의 등록은 <strong>DefaultListableBeanFactory</strong> 클래스의 <code>registerBeanDefinition</code> 메서드 에서 이루어지고 있었다.</p> <h2 id="정리">정리</h2> <p>지금 까지 알아본 것을 정리하면</p> <ul><li><strong>Bean을 등록하는 책임</strong>은 사실 BeanFactory가 아닌 <strong>BeanDefinitionRegistry</strong>가 가지고 있다.</li> <li>ApplicationContext 인터페이스는 BeanFactory 인터페이스와 BeanDefinitionRegistry 인터페이스를 상속받고 있다.</li> <li><strong>ApplicationContext 구현체</strong>(<strong>GenericApplicationContext</strong>)의 <code>registerBeanDefinition</code> 메서드를 통해 Bean의 등록이 진행되지만</li> <li>ApplicationContext 의 구현체는 기능을 직접 구현하진 않고</li> <li>BeanFactory 와 BeanDefinitionRegistry를 구현한 구현체(<strong>DefaultListableBeanFactory</strong>)에 그 책임을 위임하고 있다.</li> <li><strong>DefaultListableBeanFactory</strong>는 <code>registerBeanDefinition</code> 메서드를 통해 Bean을 <strong>beanDefinitionMap에 저장</strong>한다.</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/7/2020, 4:29:58 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e407946c.js" defer></script><script src="/assets/js/2.e419600a.js" defer></script><script src="/assets/js/3.e1f5be75.js" defer></script>
  </body>
</html>
