<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Immutable 클래스 | Lingi04</title>
    <meta name="description" content="개발 관련 이것 저것">
    
    
    <link rel="preload" href="/assets/css/0.styles.4b6fa609.css" as="style"><link rel="preload" href="/assets/js/app.59d46c91.js" as="script"><link rel="preload" href="/assets/js/2.e419600a.js" as="script"><link rel="preload" href="/assets/js/60.f6a7c119.js" as="script"><link rel="prefetch" href="/assets/js/10.2659930a.js"><link rel="prefetch" href="/assets/js/100.f2cfac1d.js"><link rel="prefetch" href="/assets/js/11.83135f46.js"><link rel="prefetch" href="/assets/js/12.6db303cf.js"><link rel="prefetch" href="/assets/js/13.21a32bbb.js"><link rel="prefetch" href="/assets/js/14.67e29bf8.js"><link rel="prefetch" href="/assets/js/15.7bce78a4.js"><link rel="prefetch" href="/assets/js/16.7ed0a56d.js"><link rel="prefetch" href="/assets/js/17.b36f3e05.js"><link rel="prefetch" href="/assets/js/18.2bcd9494.js"><link rel="prefetch" href="/assets/js/19.d0bfef8f.js"><link rel="prefetch" href="/assets/js/20.be2c8e5c.js"><link rel="prefetch" href="/assets/js/21.9fd2d792.js"><link rel="prefetch" href="/assets/js/22.3d92da2a.js"><link rel="prefetch" href="/assets/js/23.99e4b4d9.js"><link rel="prefetch" href="/assets/js/24.43eae32b.js"><link rel="prefetch" href="/assets/js/25.d130df9f.js"><link rel="prefetch" href="/assets/js/26.c294125c.js"><link rel="prefetch" href="/assets/js/27.e7136c01.js"><link rel="prefetch" href="/assets/js/28.c82c431c.js"><link rel="prefetch" href="/assets/js/29.e4c07586.js"><link rel="prefetch" href="/assets/js/3.4f1c787b.js"><link rel="prefetch" href="/assets/js/30.949eb54e.js"><link rel="prefetch" href="/assets/js/31.0f92a40c.js"><link rel="prefetch" href="/assets/js/32.0f2c7969.js"><link rel="prefetch" href="/assets/js/33.b3d6236e.js"><link rel="prefetch" href="/assets/js/34.5d067c1f.js"><link rel="prefetch" href="/assets/js/35.dbe87974.js"><link rel="prefetch" href="/assets/js/36.5f4b9e67.js"><link rel="prefetch" href="/assets/js/37.8e57f858.js"><link rel="prefetch" href="/assets/js/38.1f216c94.js"><link rel="prefetch" href="/assets/js/39.683079c5.js"><link rel="prefetch" href="/assets/js/4.78459bf3.js"><link rel="prefetch" href="/assets/js/40.18742b17.js"><link rel="prefetch" href="/assets/js/41.6b0746d0.js"><link rel="prefetch" href="/assets/js/42.73c13c81.js"><link rel="prefetch" href="/assets/js/43.15df36ba.js"><link rel="prefetch" href="/assets/js/44.5dee1d40.js"><link rel="prefetch" href="/assets/js/45.bb9d83e5.js"><link rel="prefetch" href="/assets/js/46.3450f0b1.js"><link rel="prefetch" href="/assets/js/47.7e1b5bdd.js"><link rel="prefetch" href="/assets/js/48.bc2dfcfd.js"><link rel="prefetch" href="/assets/js/49.d84df05c.js"><link rel="prefetch" href="/assets/js/5.78b02e55.js"><link rel="prefetch" href="/assets/js/50.dd16318b.js"><link rel="prefetch" href="/assets/js/51.1ffe25a8.js"><link rel="prefetch" href="/assets/js/52.b7d05d46.js"><link rel="prefetch" href="/assets/js/53.ae061c1c.js"><link rel="prefetch" href="/assets/js/54.bd39af74.js"><link rel="prefetch" href="/assets/js/55.5dcd3798.js"><link rel="prefetch" href="/assets/js/56.3001f847.js"><link rel="prefetch" href="/assets/js/57.ddff5baf.js"><link rel="prefetch" href="/assets/js/58.c2108303.js"><link rel="prefetch" href="/assets/js/59.6fbdcea7.js"><link rel="prefetch" href="/assets/js/6.7fb74477.js"><link rel="prefetch" href="/assets/js/61.bf2932d7.js"><link rel="prefetch" href="/assets/js/62.641c8eb4.js"><link rel="prefetch" href="/assets/js/63.921de79c.js"><link rel="prefetch" href="/assets/js/64.8d88dfe3.js"><link rel="prefetch" href="/assets/js/65.42c99c1f.js"><link rel="prefetch" href="/assets/js/66.27af7e8e.js"><link rel="prefetch" href="/assets/js/67.14d76317.js"><link rel="prefetch" href="/assets/js/68.1767fb09.js"><link rel="prefetch" href="/assets/js/69.9b9f8355.js"><link rel="prefetch" href="/assets/js/7.ee25bf2f.js"><link rel="prefetch" href="/assets/js/70.f484d355.js"><link rel="prefetch" href="/assets/js/71.17474797.js"><link rel="prefetch" href="/assets/js/72.4075ed54.js"><link rel="prefetch" href="/assets/js/73.6ab8222e.js"><link rel="prefetch" href="/assets/js/74.93aba3bf.js"><link rel="prefetch" href="/assets/js/75.5fe063c7.js"><link rel="prefetch" href="/assets/js/76.648a3b71.js"><link rel="prefetch" href="/assets/js/77.7cb8d170.js"><link rel="prefetch" href="/assets/js/78.5aba6968.js"><link rel="prefetch" href="/assets/js/79.9d1168a9.js"><link rel="prefetch" href="/assets/js/8.20bc98a5.js"><link rel="prefetch" href="/assets/js/80.c8d88cb8.js"><link rel="prefetch" href="/assets/js/81.e2cc2d42.js"><link rel="prefetch" href="/assets/js/82.b40b7780.js"><link rel="prefetch" href="/assets/js/83.30953119.js"><link rel="prefetch" href="/assets/js/84.a6402194.js"><link rel="prefetch" href="/assets/js/85.9afa7f37.js"><link rel="prefetch" href="/assets/js/86.4f11b206.js"><link rel="prefetch" href="/assets/js/87.0d86436a.js"><link rel="prefetch" href="/assets/js/88.c021df5e.js"><link rel="prefetch" href="/assets/js/89.819ae908.js"><link rel="prefetch" href="/assets/js/9.64d4d7c9.js"><link rel="prefetch" href="/assets/js/90.ba73a68f.js"><link rel="prefetch" href="/assets/js/91.b6e6279d.js"><link rel="prefetch" href="/assets/js/92.4927c868.js"><link rel="prefetch" href="/assets/js/93.2eb0c410.js"><link rel="prefetch" href="/assets/js/94.f82e845b.js"><link rel="prefetch" href="/assets/js/95.21a359ab.js"><link rel="prefetch" href="/assets/js/96.1e41a15a.js"><link rel="prefetch" href="/assets/js/97.c8c8ae47.js"><link rel="prefetch" href="/assets/js/98.77357199.js"><link rel="prefetch" href="/assets/js/99.473f3dad.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b6fa609.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/thumbnail.png" alt="Lingi04" class="logo"> <span class="site-name can-hide">Lingi04</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link router-link-exact-active router-link-active">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link router-link-exact-active router-link-active">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>프로그래밍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/Immutable.html" class="active sidebar-link">Immutable 클래스</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/programming/Immutable.html#immutable-클래스란" class="sidebar-link">Immutable 클래스란?</a></li><li class="sidebar-sub-header"><a href="/programming/Immutable.html#특징" class="sidebar-link">특징</a></li><li class="sidebar-sub-header"><a href="/programming/Immutable.html#생성-방법" class="sidebar-link">생성 방법</a></li><li class="sidebar-sub-header"><a href="/programming/Immutable.html#사용되는-곳" class="sidebar-link">사용되는 곳</a></li></ul></li><li><a href="/programming/enum.html" class="sidebar-link">Enum에 관하여</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="immutable-클래스">Immutable 클래스</h1> <p>예전에 Immutable / Mutable 클래스에 대해서 들었을 땐 그냥 '아 그렇구나' 하고 넘어갔다. 둘 사이의 차이에 대해 깊게 생각해 본 적 없기 때문에 클래스를 만들 때 기본적으로 <code>@Gettet</code>, <code>@Setter</code> 어노테이션을 붙이고 시작을 했었다.</p> <p>그러다 스터디 에서 리뷰 중 <code>DTO 클래스는 Immutable한게 좋다</code>는 피드백을 받았고, 최근 제출한 과제에서도 과도한 <code>Setter</code>는 좋지 않다는 피드백을 받아 <em>Effective Java</em>와 인터넷 에서 Immutable 클래스에 대해 좀 찾아보았다.</p> <h2 id="immutable-클래스란">Immutable 클래스란?</h2> <p>Immutable 클래스는 객체를 생성 후 수정할 수 없는 클래스다. Immutable 클래스는 어떤 특징을 가지고 있고 어떻게 하면 만들 수 있는 지, 어디에 사용되는지에 대해 알아보자.</p> <h2 id="특징">특징</h2> <h3 id="단순하다">단순하다</h3> <p>Immutable 객체는 생성될 때 부여된 한 가지 상태만 갖는다. 또한 생성 시 적절하게 validation을 해준다면 'valid state'를 가지게 된다.</p> <h3 id="thread-safe하다">Thread-safe하다.</h3> <p>필드의 상태가 변경될 일이 없으므로 여러 스레드가 동시에 사용해도 상태가 훼손될 일이 없다.</p> <h3 id="자유롭게-공유-가능하다">자유롭게 공유 가능하다.</h3> <p>Thread-safe 하므로 자유롭게 공유 가능하다.</p> <h3 id="변경에-적절하게-대응할수-있다">변경에 적절하게 대응할수 있다.</h3> <p>Immutable 객체의 field는 보통 final과 함게 쓰이는데, 덕분에 변경이 일어났을 때 compiler는 우리에게 경고를 보내줄 수 있다.</p> <h3 id="값마다-별도의-객체를-만들어야-한다">값마다 별도의 객체를 만들어야 한다.</h3> <p>Immutable 하므로 값마다 새로운 객체를 만들어야 한다. 따라서 객체 생성 비용이 높을 수 있다.</p> <h2 id="생성-방법">생성 방법</h2> <h3 id="private-접근자">private 접근자</h3> <p>private 접근자를 두면 사용자가 필드에 직접 접근해 변경할 수 없게 된다.
아래와 같이 모든 필드를 <code>private</code>로 두면 된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="setter-사용금지">setter 사용금지</h3> <p>위와 같이 필드의 접근제어자를 private로 설정해 놓아도 setter(mutator)를 만들어 놓는다면 필드의 변경이 가능해 진다. 따라서 Immutable 클래스는 setter를 제공하지 않는다.</p> <h3 id="final-사용">final 사용</h3> <p>final을 사용하면 프로그래머의 의도가 그대로 드러나게 되며, 필드를 변경할 수 없다는 것을 명시적으로 나타내 준다. 하지만 몇몇 경우에는 final로 선언 하였더라도 변경할 수 있는 경우가 있는데</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nicknames <span class="token operator">=</span> nicknames<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*****************************************/</span>
user<span class="token punctuation">.</span><span class="token function">getNicknames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'lingi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>이 경우엔 nicknames를 final로 선언하긴 했지만 mutable한 자료형을 사용했기 때문에 nicknames에 새로운 노드를 추가할 수 있다. 따라서 이런 경우엔 새로운 list를 생성하여 값을 복사해서 리턴해 주거나 immutable한 자료형을 사용하여야 한다.</p> <h3 id="상속받지-못하게-한다">상속받지 못하게 한다.</h3> <p>모든 필드를 immutable하게 만들어도 상속을 할 수 있으면 상속받은 하위 클래스가 객체 상태가 변경된 것처럼 동작해서 Immutable한 상태를 깨뜨릴 수 있다. 상속을 막기 위해 아래와 같이 final 키워드를 사용할 수 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="private-생성자와-정적팩토리-메서드-사용">private 생성자와 정적팩토리 메서드 사용</h3> <p>객체의 성격에 따라 여러 validation을 해야 하는 경우가 있다. 위에서 예를 든 User클래스의 경우, 임시 User의 경우 아직 'id'나 'nickname'이 없이 생성될 수 있다. 이럴 경우 파라미터에 <code>null</code>을 넘기기 보단, 정적팩토리 메서드를 이용해</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames

    <span class="token keyword">private</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nicknames <span class="token operator">=</span> nicknames<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">User</span> <span class="token function">existingUser</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> nicknames<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">User</span> <span class="token function">temporaryUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이런식으로 이미 존재하는 user를 생성할 땐 <code>existingUser</code>, 임시 user를 생성할 땐 <code>temporaryUser</code>를 사용하여 서로 다른 validation을 적용해 객체를 생성할 수 있다.</p> <h3 id="optional-필드를-적절히-사용">Optional 필드를 적절히 사용</h3> <p>여러 이유에서 필드에 null값이 들어갈 수 있다. 이때 그 값을 그냥 가져와 사용한다면 NullPointerException이 발생할 수 있다. 이럴 경우엔 <code>Optional</code>을 적절히 사용해 주면 된다. User 클래스의 id 필드를 예로 들면</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Getter</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Getter</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames

    <span class="token keyword">public</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이런식으로 선언해 놓으면 User 클래스 사용자는 Optional 필드를 보고 필드의 용도/의도를 파악하여 사용할 수 있다. 하지만 필드를 Optional으로 선언하는 것은 좋지 않은 방법인데, 필드에 null값이 들어갈 수 있기 때문이다.</p> <blockquote><h4 id="모든-클래스를-불변으로-만들-수는-없다">모든 클래스를 불변으로 만들 수는 없다.</h4> <p>다만, 그런 클래스 라도 <strong>변경할 수 있는 부분을 최소한</strong>으로 줄이자. 객체가 가질 수 있는 상태의 수를 줄이면 그 객체를 예측하기 쉬워지고 오류가 생길 가능성이 줄어든다.</p></blockquote> <h2 id="사용되는-곳">사용되는 곳</h2> <h3 id="concurrency-프로그래밍">Concurrency 프로그래밍</h3> <ul><li>Multi Thread 프로그래밍을 한다면 여러 Thread에서 접근하는 객체는 Immutable하게 두는것이 좋다.</li> <li>Concurrency code에서 mutable한 object는 꼭 필요한 경우에만 사용해야 한다.</li></ul> <h3 id="value-object-vo">Value Object(VO)</h3> <ul><li>VO는 특정 '값'을 나타내기 때문에 변하면 안된다.
<ul><li>Long, Integer 같은 java의 wrapper 클래스</li> <li>Money</li> <li>Weight</li> <li>Name<br>
...</li></ul></li></ul> <h3 id="data-transfer-object-dto">Data Transfer Object(DTO)</h3> <ul><li>DTO는 서로 다른 component나 서로 다른 system 사이에 데이터를 전송해주는 객체이다.</li> <li>DTO는 꼭 Immutable할 필요는 없지만 Immutable 하게, 혹은 거의 Immutable하게 만듦으로서 얻을 수 있는 장점이 있다.
<ul><li>Debugging 용이, 유지보수 용이.</li> <li>DTO가 mutable 하다면 DTO가 여러 component의 수많은 코드를 거치며 값이 변경될 수 있고, 이로 인해 에러가 발생하면 찾기가 어렵게 된다.</li></ul></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/20/2020, 10:26:18 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/programming/enum.html">Enum에 관하여</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.59d46c91.js" defer></script><script src="/assets/js/2.e419600a.js" defer></script><script src="/assets/js/60.f6a7c119.js" defer></script>
  </body>
</html>
