<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Immutable 클래스 | Lingi04</title>
    <meta name="description" content="개발 관련 이것 저것">
    
    
    <link rel="preload" href="/assets/css/0.styles.4b6fa609.css" as="style"><link rel="preload" href="/assets/js/app.968d4068.js" as="script"><link rel="preload" href="/assets/js/2.e419600a.js" as="script"><link rel="preload" href="/assets/js/61.20724712.js" as="script"><link rel="prefetch" href="/assets/js/10.2d6dd5e3.js"><link rel="prefetch" href="/assets/js/100.51ca8b81.js"><link rel="prefetch" href="/assets/js/101.3eb424f8.js"><link rel="prefetch" href="/assets/js/102.c6cb0c1d.js"><link rel="prefetch" href="/assets/js/103.28c9471d.js"><link rel="prefetch" href="/assets/js/104.0969a21f.js"><link rel="prefetch" href="/assets/js/105.43f943c8.js"><link rel="prefetch" href="/assets/js/106.ba981bc7.js"><link rel="prefetch" href="/assets/js/107.834dc994.js"><link rel="prefetch" href="/assets/js/108.fb2c985e.js"><link rel="prefetch" href="/assets/js/11.88b01a58.js"><link rel="prefetch" href="/assets/js/12.5551473d.js"><link rel="prefetch" href="/assets/js/13.45dd4bc2.js"><link rel="prefetch" href="/assets/js/14.67e29bf8.js"><link rel="prefetch" href="/assets/js/15.4445c3a6.js"><link rel="prefetch" href="/assets/js/16.f6bafddf.js"><link rel="prefetch" href="/assets/js/17.72d85811.js"><link rel="prefetch" href="/assets/js/18.c5513ed8.js"><link rel="prefetch" href="/assets/js/19.31adf5fd.js"><link rel="prefetch" href="/assets/js/20.ce7fc55d.js"><link rel="prefetch" href="/assets/js/21.9fd2d792.js"><link rel="prefetch" href="/assets/js/22.40121585.js"><link rel="prefetch" href="/assets/js/23.7b6084cc.js"><link rel="prefetch" href="/assets/js/24.4eaf9b2e.js"><link rel="prefetch" href="/assets/js/25.32c78728.js"><link rel="prefetch" href="/assets/js/26.1a814f94.js"><link rel="prefetch" href="/assets/js/27.246f3191.js"><link rel="prefetch" href="/assets/js/28.f5aa7be9.js"><link rel="prefetch" href="/assets/js/29.b93d7dcd.js"><link rel="prefetch" href="/assets/js/3.e1f5be75.js"><link rel="prefetch" href="/assets/js/30.b052cbc0.js"><link rel="prefetch" href="/assets/js/31.e2b9f133.js"><link rel="prefetch" href="/assets/js/32.e98e8e31.js"><link rel="prefetch" href="/assets/js/33.d6898684.js"><link rel="prefetch" href="/assets/js/34.cf7380db.js"><link rel="prefetch" href="/assets/js/35.15780e28.js"><link rel="prefetch" href="/assets/js/36.9e0f8ab5.js"><link rel="prefetch" href="/assets/js/37.90ce7b3c.js"><link rel="prefetch" href="/assets/js/38.f70e1b20.js"><link rel="prefetch" href="/assets/js/39.683079c5.js"><link rel="prefetch" href="/assets/js/4.e18ebf1a.js"><link rel="prefetch" href="/assets/js/40.ef32a3a8.js"><link rel="prefetch" href="/assets/js/41.8cea8f69.js"><link rel="prefetch" href="/assets/js/42.df076eea.js"><link rel="prefetch" href="/assets/js/43.7d3dc261.js"><link rel="prefetch" href="/assets/js/44.5ed8e795.js"><link rel="prefetch" href="/assets/js/45.54094204.js"><link rel="prefetch" href="/assets/js/46.172d6211.js"><link rel="prefetch" href="/assets/js/47.9ce2d6e9.js"><link rel="prefetch" href="/assets/js/48.26af26e2.js"><link rel="prefetch" href="/assets/js/49.784fdfba.js"><link rel="prefetch" href="/assets/js/5.fdb230f5.js"><link rel="prefetch" href="/assets/js/50.d16eff51.js"><link rel="prefetch" href="/assets/js/51.610c36df.js"><link rel="prefetch" href="/assets/js/52.83c29631.js"><link rel="prefetch" href="/assets/js/53.d989a20d.js"><link rel="prefetch" href="/assets/js/54.6a633402.js"><link rel="prefetch" href="/assets/js/55.5badc36d.js"><link rel="prefetch" href="/assets/js/56.57d5ace0.js"><link rel="prefetch" href="/assets/js/57.8e5cd012.js"><link rel="prefetch" href="/assets/js/58.e8f38d6c.js"><link rel="prefetch" href="/assets/js/59.bc71dc6a.js"><link rel="prefetch" href="/assets/js/6.7fb74477.js"><link rel="prefetch" href="/assets/js/60.8316c505.js"><link rel="prefetch" href="/assets/js/62.76cd46c4.js"><link rel="prefetch" href="/assets/js/63.39884fd2.js"><link rel="prefetch" href="/assets/js/64.f20d5782.js"><link rel="prefetch" href="/assets/js/65.a4fe4be1.js"><link rel="prefetch" href="/assets/js/66.168f9d74.js"><link rel="prefetch" href="/assets/js/67.a7c194ac.js"><link rel="prefetch" href="/assets/js/68.1fcf8167.js"><link rel="prefetch" href="/assets/js/69.3bbd8a13.js"><link rel="prefetch" href="/assets/js/7.ee25bf2f.js"><link rel="prefetch" href="/assets/js/70.d7f6ec2a.js"><link rel="prefetch" href="/assets/js/71.15ab3442.js"><link rel="prefetch" href="/assets/js/72.961a242b.js"><link rel="prefetch" href="/assets/js/73.bb0407ef.js"><link rel="prefetch" href="/assets/js/74.c0cad9aa.js"><link rel="prefetch" href="/assets/js/75.e1592924.js"><link rel="prefetch" href="/assets/js/76.ee9273ba.js"><link rel="prefetch" href="/assets/js/77.7cc9a13a.js"><link rel="prefetch" href="/assets/js/78.83b0f6c2.js"><link rel="prefetch" href="/assets/js/79.5efa5100.js"><link rel="prefetch" href="/assets/js/8.20bc98a5.js"><link rel="prefetch" href="/assets/js/80.deca5d67.js"><link rel="prefetch" href="/assets/js/81.46f5c2bf.js"><link rel="prefetch" href="/assets/js/82.5a6844c8.js"><link rel="prefetch" href="/assets/js/83.b898047a.js"><link rel="prefetch" href="/assets/js/84.79437512.js"><link rel="prefetch" href="/assets/js/85.daf0c959.js"><link rel="prefetch" href="/assets/js/86.26753c97.js"><link rel="prefetch" href="/assets/js/87.d3594f57.js"><link rel="prefetch" href="/assets/js/88.9e5b80b9.js"><link rel="prefetch" href="/assets/js/89.db490924.js"><link rel="prefetch" href="/assets/js/9.c29c567d.js"><link rel="prefetch" href="/assets/js/90.79f46a42.js"><link rel="prefetch" href="/assets/js/91.341d76bb.js"><link rel="prefetch" href="/assets/js/92.076157bc.js"><link rel="prefetch" href="/assets/js/93.303d7b63.js"><link rel="prefetch" href="/assets/js/94.0aac6b86.js"><link rel="prefetch" href="/assets/js/95.39a369e7.js"><link rel="prefetch" href="/assets/js/96.25c7e62b.js"><link rel="prefetch" href="/assets/js/97.860d9767.js"><link rel="prefetch" href="/assets/js/98.fa922bcd.js"><link rel="prefetch" href="/assets/js/99.aa9f82ec.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b6fa609.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/thumbnail.png" alt="Lingi04" class="logo"> <span class="site-name can-hide">Lingi04</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link router-link-exact-active router-link-active">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link">Study</a></div><div class="nav-item"><a href="/backend/" class="nav-link">Backend</a></div><div class="nav-item"><a href="/programming/Immutable.html" class="nav-link router-link-exact-active router-link-active">Programming</a></div><div class="nav-item"><a href="/experiences/" class="nav-link">Experiences</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>프로그래밍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/Immutable.html" class="active sidebar-link">Immutable 클래스</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/programming/Immutable.html#immutable-클래스란" class="sidebar-link">Immutable 클래스란?</a></li><li class="sidebar-sub-header"><a href="/programming/Immutable.html#특징" class="sidebar-link">특징</a></li><li class="sidebar-sub-header"><a href="/programming/Immutable.html#생성-방법" class="sidebar-link">생성 방법</a></li><li class="sidebar-sub-header"><a href="/programming/Immutable.html#사용되는-곳" class="sidebar-link">사용되는 곳</a></li></ul></li><li><a href="/programming/enum.html" class="sidebar-link">Enum에 관하여</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="immutable-클래스">Immutable 클래스</h1> <p>예전에 Immutable / Mutable 클래스에 대해서 들었을 땐 그냥 '아 그렇구나' 하고 넘어갔다. 둘 사이의 차이에 대해 깊게 생각해 본 적 없기 때문에 클래스를 만들 때 기본적으로 <code>@Gettet</code>, <code>@Setter</code> 어노테이션을 붙이고 시작을 했었다.</p> <p>그러다 스터디 에서 리뷰 중 <code>DTO 클래스는 Immutable한게 좋다</code>는 피드백을 받았고, 최근 제출한 과제에서도 과도한 <code>Setter</code>는 좋지 않다는 피드백을 받아 <em>Effective Java</em>와 인터넷 에서 Immutable 클래스에 대해 좀 찾아보았다.</p> <h2 id="immutable-클래스란">Immutable 클래스란?</h2> <p>Immutable 클래스는 객체를 생성 후 수정할 수 없는 클래스다. Immutable 클래스는 어떤 특징을 가지고 있고 어떻게 하면 만들 수 있는 지, 어디에 사용되는지에 대해 알아보자.</p> <h2 id="특징">특징</h2> <h3 id="단순하다">단순하다</h3> <p>Immutable 객체는 생성될 때 부여된 한 가지 상태만 갖는다. 또한 생성 시 적절하게 validation을 해준다면 'valid state'를 가지게 된다.</p> <h3 id="thread-safe하다">Thread-safe하다.</h3> <p>필드의 상태가 변경될 일이 없으므로 여러 스레드가 동시에 사용해도 상태가 훼손될 일이 없다.</p> <h3 id="자유롭게-공유-가능하다">자유롭게 공유 가능하다.</h3> <p>Thread-safe 하므로 자유롭게 공유 가능하다.</p> <h3 id="변경에-적절하게-대응할수-있다">변경에 적절하게 대응할수 있다.</h3> <p>Immutable 객체의 field는 보통 final과 함게 쓰이는데, 덕분에 변경이 일어났을 때 compiler는 우리에게 경고를 보내줄 수 있다.</p> <h3 id="값마다-별도의-객체를-만들어야-한다">값마다 별도의 객체를 만들어야 한다.</h3> <p>Immutable 하므로 값마다 새로운 객체를 만들어야 한다. 따라서 객체 생성 비용이 높을 수 있다.</p> <h2 id="생성-방법">생성 방법</h2> <h3 id="private-접근자">private 접근자</h3> <p>private 접근자를 두면 사용자가 필드에 직접 접근해 변경할 수 없게 된다.
아래와 같이 모든 필드를 <code>private</code>로 두면 된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="setter-사용금지">setter 사용금지</h3> <p>위와 같이 필드의 접근제어자를 private로 설정해 놓아도 setter(mutator)를 만들어 놓는다면 필드의 변경이 가능해 진다. 따라서 Immutable 클래스는 setter를 제공하지 않는다.</p> <h3 id="final-사용">final 사용</h3> <p>final을 사용하면 프로그래머의 의도가 그대로 드러나게 되며, 필드를 변경할 수 없다는 것을 명시적으로 나타내 준다. 하지만 몇몇 경우에는 final로 선언 하였더라도 변경할 수 있는 경우가 있는데</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nicknames <span class="token operator">=</span> nicknames<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*****************************************/</span>
user<span class="token punctuation">.</span><span class="token function">getNicknames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'lingi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>이 경우엔 nicknames를 final로 선언하긴 했지만 mutable한 자료형을 사용했기 때문에 nicknames에 새로운 노드를 추가할 수 있다. 따라서 이런 경우엔 새로운 list를 생성하여 값을 복사해서 리턴해 주거나 immutable한 자료형을 사용하여야 한다.</p> <h3 id="상속받지-못하게-한다">상속받지 못하게 한다.</h3> <p>모든 필드를 immutable하게 만들어도 상속을 할 수 있으면 상속받은 하위 클래스가 객체 상태가 변경된 것처럼 동작해서 Immutable한 상태를 깨뜨릴 수 있다. 상속을 막기 위해 아래와 같이 final 키워드를 사용할 수 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="private-생성자와-정적팩토리-메서드-사용">private 생성자와 정적팩토리 메서드 사용</h3> <p>객체의 성격에 따라 여러 validation을 해야 하는 경우가 있다. 위에서 예를 든 User클래스의 경우, 임시 User의 경우 아직 'id'나 'nickname'이 없이 생성될 수 있다. 이럴 경우 파라미터에 <code>null</code>을 넘기기 보단, 정적팩토리 메서드를 이용해</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames

    <span class="token keyword">private</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nicknames <span class="token operator">=</span> nicknames<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">User</span> <span class="token function">existingUser</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> nicknames<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">User</span> <span class="token function">temporaryUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>name <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이런식으로 이미 존재하는 user를 생성할 땐 <code>existingUser</code>, 임시 user를 생성할 땐 <code>temporaryUser</code>를 사용하여 서로 다른 validation을 적용해 객체를 생성할 수 있다.</p> <h3 id="optional-필드를-적절히-사용">Optional 필드를 적절히 사용</h3> <p>여러 이유에서 필드에 null값이 들어갈 수 있다. 이때 그 값을 그냥 가져와 사용한다면 NullPointerException이 발생할 수 있다. 이럴 경우엔 <code>Optional</code>을 적절히 사용해 주면 된다. User 클래스의 id 필드를 예로 들면</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Getter</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Getter</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nicknames

    <span class="token keyword">public</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이런식으로 선언해 놓으면 User 클래스 사용자는 Optional 필드를 보고 필드의 용도/의도를 파악하여 사용할 수 있다. 하지만 필드를 Optional으로 선언하는 것은 좋지 않은 방법인데, 필드에 null값이 들어갈 수 있기 때문이다.</p> <blockquote><h4 id="모든-클래스를-불변으로-만들-수는-없다">모든 클래스를 불변으로 만들 수는 없다.</h4> <p>다만, 그런 클래스 라도 <strong>변경할 수 있는 부분을 최소한</strong>으로 줄이자. 객체가 가질 수 있는 상태의 수를 줄이면 그 객체를 예측하기 쉬워지고 오류가 생길 가능성이 줄어든다.</p></blockquote> <h2 id="사용되는-곳">사용되는 곳</h2> <h3 id="concurrency-프로그래밍">Concurrency 프로그래밍</h3> <ul><li>Multi Thread 프로그래밍을 한다면 여러 Thread에서 접근하는 객체는 Immutable하게 두는것이 좋다.</li> <li>Concurrency code에서 mutable한 object는 꼭 필요한 경우에만 사용해야 한다.</li></ul> <h3 id="value-object-vo">Value Object(VO)</h3> <ul><li>VO는 특정 '값'을 나타내기 때문에 변하면 안된다.
<ul><li>Long, Integer 같은 java의 wrapper 클래스</li> <li>Money</li> <li>Weight</li> <li>Name<br>
...</li></ul></li></ul> <h3 id="data-transfer-object-dto">Data Transfer Object(DTO)</h3> <ul><li>DTO는 서로 다른 component나 서로 다른 system 사이에 데이터를 전송해주는 객체이다.</li> <li>DTO는 꼭 Immutable할 필요는 없지만 Immutable 하게, 혹은 거의 Immutable하게 만듦으로서 얻을 수 있는 장점이 있다.
<ul><li>Debugging 용이, 유지보수 용이.</li> <li>DTO가 mutable 하다면 DTO가 여러 component의 수많은 코드를 거치며 값이 변경될 수 있고, 이로 인해 에러가 발생하면 찾기가 어렵게 된다.</li></ul></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/20/2020, 10:26:18 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/programming/enum.html">Enum에 관하여</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.968d4068.js" defer></script><script src="/assets/js/2.e419600a.js" defer></script><script src="/assets/js/61.20724712.js" defer></script>
  </body>
</html>
